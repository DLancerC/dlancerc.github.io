<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[Maven å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰]]></title>
      <url>%2F2017%2F07%2F11%2FMaven-Note-5%2F</url>
      <content type="text"><![CDATA[Maven çš„æ ¸å¿ƒä»…ä»…å®šä¹‰äº†æŠ½è±¡çš„ç”Ÿå‘½å‘¨æœŸ, å…·ä½“çš„ä»»åŠ¡æ˜¯äº¤ç»™æ’ä»¶åŽ»å®Œæˆçš„, æ’ä»¶ä»¥ç‹¬ç«‹æž„ä»¶å½¢å¼å­˜åœ¨, å› æ­¤, Maven åªä¼šåœ¨ä½¿ç”¨æ—¶æ‰ä¼šè¿žæŽ¥è¿œç¨‹ä»“åº“ä¸‹è½½éœ€è¦ä½¿ç”¨çš„æ’ä»¶.Mavenä¸ºäº†å¤ç”¨ä»£ç , ä¸€ä¸ªæ’ä»¶èƒ½å®Œæˆå¤šä¸ªä»»åŠ¡. ä¸€äº›åŠŸèƒ½ç»„æˆ Maven æ’ä»¶, æ¯ä¸ª Maven æ’ä»¶çš„åŠŸèƒ½æ˜¯æ’ä»¶çš„ç›®æ ‡. æ’ä»¶ç»‘å®šç”Ÿå‘½å‘¨æœŸçš„é˜¶æ®µä¸Žæ’ä»¶çš„ç›®æ ‡ç›¸äº’ç»‘å®š, ä»¥å®ŒæˆæŸä¸ªå…·ä½“çš„æž„å»ºä»»åŠ¡. eg: maven-compiler-plugin å¯¹åº” default ç”Ÿå‘½å‘¨æœŸçš„ compile é˜¶æ®µ. clean ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ æ’ä»¶ç›®æ ‡ pre-clean &nbsp; clean maven-clean-plugin:clean post-clean &nbsp; default ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ æ’ä»¶ç›®æ ‡ process-resources maven-resources-plugin:resources compile maven-compiler-plugin:compile process-test-resources maven-resources-plugin:testResources test-compile maven-compiler-plugin:testCompile test maven-surefire-plugin:test package maven-jar-plugin:jar install maven-install-plugin:install deploy maven-deploy-plugin:deploy default ç”Ÿå‘½å‘¨æœŸè¿˜æœ‰å…¶ä»–é˜¶æ®µ, é»˜è®¤å®ƒä»¬æ²¡æœ‰ç»‘å®šä»»ä½•æ’ä»¶ site ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ æ’ä»¶ç›®æ ‡ pre-site site maven-site-plugin:site post-site site-deploy maven-site-plugin:deploy é™¤äº†å†…ç½®ç»‘å®š, å¯ä»¥é€šè¿‡è‡ªå·±é€‰æ‹©æŸä¸ªæ’ä»¶ç›®æ ‡ç»‘å®šåˆ°æŸä¸ªç”Ÿå‘½å‘¨æœŸçš„æŸä¸ªé˜¶æ®µ. è‡ªå®šä¹‰ç»‘å®šeg: ç”Ÿæˆé¡¹ç›®çš„æºç  jar åŒ…, å¯ä»¥åˆ©ç”¨ maven-source-plugin, å®ƒå…¶ä¸­çš„ jar-no-fork ç›®æ ‡å¯ä»¥å°†é¡¹ç›®ä¸»ä»£ç æ‰“åŒ…æˆ jar æ–‡ä»¶, å¯ä»¥å°† default ç”Ÿå‘½å‘¨æœŸ verify é˜¶æ®µ, åœ¨å®Œæˆé›†æˆæµ‹è¯•åŽå’Œå®‰è£…æž„ä»¶ä¹‹å‰åˆ›å»ºæºç  jar åŒ…. 1234567891011121314151617181920212223&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt; &lt;version&gt;2.1.1&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;!-- æ‰§è¡Œä»»åŠ¡ --&gt; &lt;id&gt;attach-sources&lt;/id&gt; &lt;!-- ç»‘å®šä»»åŠ¡æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ --&gt; &lt;phase&gt;verify&lt;/phase&gt; &lt;!-- éœ€è¦æ‰§è¡Œçš„æ’ä»¶ç›®æ ‡ --&gt; &lt;goals&gt; &lt;goal&gt;jar-no-fork&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; æ’ä»¶é…ç½® å‘½ä»¤è¡Œæ’ä»¶é…ç½®Mavenä¸­å¯ä»¥ä½¿ç”¨ -D å‚æ•°, å¹¶ä¼´éšä¸€ä¸ªå‚æ•°å»º = å‚æ•°å€¼eg: ç¼–è¯‘æ—¶è·³è¿‡é¡¹ç›®é‡Œçš„æµ‹è¯•ä»£è¡¨ 1mvn install -Dmaven.test.skip=true POMä¸­æ’ä»¶å…¨å±€é…ç½®å¦‚æžœä¸€äº›å‚æ•°ä»Žé¡¹ç›®åˆ›å»ºåˆ°é¡¹ç›®å‘å¸ƒéƒ½ä¸ä¼šæ”¹å˜æˆ–è€…å¾ˆå°‘æ”¹å˜, å¯ä»¥åœ¨POMä¸­å…¨å±€é…ç½®.eg: ç”Ÿæˆæ”¯æŒJava 1.5 çš„å­—èŠ‚ç æ–‡ä»¶ 12345678910111213&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;2.1&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.5&lt;/source&gt; &lt;target&gt;1.5&lt;/target&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; POMä¸­æ’ä»¶ä»»åŠ¡é…ç½®è¿˜å¯ä»¥ä¸ºæŸä¸ªæ’ä»¶ä»»åŠ¡é…ç½®ç‰¹å®šçš„å‚æ•°, æ¯”å¦‚ä¸Šé¢ç”Ÿæˆé¡¹ç›®æºç çš„ä¾‹å­. æ’ä»¶è§£æžæœºåˆ¶ æ’ä»¶ä»“åº“ 1234567891011121314&lt;pluginRepositories&gt; &lt;pluginRepository&gt; &lt;id&gt;central&lt;/id&gt; &lt;name&gt;Maven Plugin Repository&lt;/name&gt; &lt;url&gt;http://repo1.maven.org/maven2&lt;/url&gt; &lt;layout&gt;default&lt;/layout&gt; &lt;snapshots&gt; &lt;enabled&gt;false&lt;/enabled&gt; &lt;/snapshots&gt; &lt;releases&gt; &lt;updatePolicy&gt;never&lt;/updatePolicy&gt; &lt;/releases&gt; &lt;/pluginRepository&gt;&lt;/pluginRepositories&gt; æ’ä»¶çš„é»˜è®¤groupIdPOMé…ç½®æ’ä»¶æ—¶, å¦‚æžœè¯¥æ’ä»¶æ˜¯ Maven çš„å®˜æ–¹æ’ä»¶, å¯ä»¥çœç•¥ groupId çš„é…ç½®. Maven è§£æžæ’ä»¶æ—¶, å¦‚æžœæ˜¯ Maven å®˜æ–¹æ’ä»¶ä¼šé»˜è®¤èŽ·å–è¶…çº§ POM ä¸­è®¾ç½®çš„ç‰ˆæœ¬, å¦‚æžœæ˜¯è‡ªå®šä¹‰æ’ä»¶, Maven ä¼šå…ˆæ£€æŸ¥æ‰€æœ‰ä»“åº“ä¸­å¯ç”¨çš„ç‰ˆæœ¬, Maven3 ä¼šç›´æŽ¥æå– releaseè¿›è¡Œä½¿ç”¨(Maven2 ä¸­é»˜è®¤ä½¿ç”¨ latest è¿›è¡Œè§£æž).]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Spring Batch(ä¸€)]]></title>
      <url>%2F2017%2F07%2F06%2FSpring-Batch-1%2F</url>
      <content type="text"><![CDATA[é¢å¯¹çŽ°ä»£ä¼ä¸šåº”ç”¨å½“ä¸­çš„å¤æ‚ä¸šåŠ¡ä»¥åŠæµ·é‡çš„æ•°æ®ï¼Œé™¤äº†é¡µé¢å¤æ‚çš„äººæœºäº¤äº’å¤„ç†ï¼Œè¿˜æœ‰ä¸€ç±»æ˜¯ä¸éœ€è¦äººå·¥å¹²é¢„ï¼Œåªéœ€è¦å®šæœŸè¯»å…¥å¤§æ‰¹é‡æ•°æ®ï¼ŒæŒ‰å¯¹åº”çš„è§„åˆ™å¤„ç†ã€‚è¿™ç§å¤„ç†è¢«ç§°ä¸º â€œæ‰¹å¤„ç† â€ã€‚ç‰¹ç‚¹ï¼š æ•°æ®é‡å·¨å¤§ ä¸éœ€è¦çš„äººå·¥å¹²é¢„ï¼Œæ ¹æ®ç³»ç»Ÿçš„é…ç½®è‡ªåŠ¨å¤„ç† æŒ‰æ—¶é—´é…ç½®å¤„ç†ã€‚ä¸€å¤©æˆ–è€…ä¸€ä¸ªæœˆæ‰§è¡Œä¸€æ¬¡ æ‰¹å¤„ç†å¯¹åº”ä¸‰ä¸ªçŽ¯èŠ‚: è¯»å–æ•°æ®ï¼Œæ•°æ®å¯èƒ½æ¥è‡ªæ–‡ä»¶ã€æ•°æ®åº“æˆ–æ¶ˆæ¯é˜Ÿåˆ—ç­‰ æ•°æ®å¤„ç†ï¼Œå¦‚é‡‘èžç³»ç»Ÿçš„å¯¹è´¦çš„è®¡è´¹å¤„ç† å†™æ•°æ®ï¼Œå°†è¾“å‡ºç»“æžœå†™å…¥æ–‡ä»¶ã€æ•°æ®åº“æˆ–æ¶ˆæ¯é˜Ÿåˆ—ç­‰ Spring Batch ä¸ä»…æä¾›äº†ç»Ÿä¸€çš„è¯»å†™æŽ¥å£ã€ä¸°å¯Œçš„ä»»åŠ¡å¤„ç†æ–¹å¼ã€çµæ´»çš„äº‹åŠ¡ç®¡ç†ä»¥åŠå¹¶å‘å¤„ç†ï¼ŒåŒæ—¶è¿˜æ”¯æŒæ—¥å¿—ã€ç›‘æŽ§ã€ä»»åŠ¡é‡å¯ä¸Žè·³è¿‡ç­‰ç‰¹æ€§ã€‚Spring Batch æ˜¯ä¸€æ¬¾æ‰¹å¤„ç†åº”ç”¨æ¡†æž¶ï¼Œä¸æ˜¯è°ƒåº¦æ¡†æž¶ã€‚å®ƒåªå…³æ³¨ä»»åŠ¡å¤„ç†çš„ç›¸å…³é—®é¢˜ï¼Œå¦‚äº‹åŠ¡ã€å¹¶å‘ã€ç›‘æŽ§ã€æ‰§è¡Œç­‰ï¼Œå¹¶ä¸ä¼šæä¾›ç›¸åº”çš„ä»»åŠ¡è°ƒåº¦åŠŸèƒ½ã€‚å¦‚æžœéœ€è¦æ‰¹å¤„ç†ä»»åŠ¡å®šæœŸæ‰§è¡Œï¼Œå¯ä»¥ç»“åˆ Quartz ç­‰è°ƒåº¦æ¡†æž¶è¯•ä¸‹ã€‚ é€šè¿‡ Spring Batch å°† CSV æ–‡ä»¶é‡Œçš„æ•°æ®å†™å…¥åˆ°æ•°æ®åº“é‡Œï¼ŒSpring Batch ä¼šè¯»å–æ•°æ®å°†æ•°æ®æ˜ å°„ä¸ºä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå¹¶åœ¨è¿žæŽ¥æ•°æ®å°†ç”Ÿæˆçš„æ•°æ®æ’å…¥åˆ°æ•°æ®ä¸­ã€‚ Maven ä¾èµ–1234567891011121314&lt;dependencies&gt; &lt;!--æ‰¹å¤„ç†æ ¸å¿ƒä»£ç --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt; &lt;artifactId&gt;spring-batch-core&lt;/artifactId&gt; &lt;version&gt;3.0.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!--æ‰¹å¤„ç†åŸºç¡€è®¿é—®æ¡†æž¶--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt; &lt;artifactId&gt;spring-batch-core&lt;/artifactId&gt; &lt;version&gt;3.0.7.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; Spring Batch å¤„ç†å‘¨æœŸ è¾“å…¥æ–‡ä»¶ï¼ˆCSVï¼‰â†’ è¯»å–å·¥å…· ï¼ˆReaderï¼‰Spring Batch é‡Œçš„org.springframework.batch.item ä¸­å®šä¹‰äº†è®¸å¤šå†…ç½®çš„ Readerï¼Œå¦‚æ•°æ®åº“ï¼ˆ.database.*ï¼‰, æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ.amqp.*ï¼‰,æ–‡ä»¶ï¼ˆ.file.*ï¼‰,å¤§æ•°æ®ï¼ˆ.data.*ï¼‰ç­‰ï¼Œè¯»å– CSV æ–‡ä»¶ä½¿ç”¨ org.springframework.batch.item.file.FlatFileItemReader 1234567891011121314151617181920212223242526&lt;bean id="playerReader" class="org.springframework.batch.item.file.FlatFileItemReader" scope="step"&gt; &lt;!-- éœ€è¦å¤„ç†çš„èµ„æºè·¯å¾„ï¼Œä¸‹é¢æ˜¯é€šè¿‡ jobParameters æŒ‡å®šæ–‡ä»¶ï¼Œå¯ä»¥ä¸åŒ Job å¤„ç†ä¸åŒæ–‡ä»¶ --&gt; &lt;property name="resource" value="file:#&#123;jobParameters['inputFile']&#125;" /&gt; &lt;!-- è·³è¿‡è¡Œæ•° --&gt; &lt;property name="linesToSkip" value="1" /&gt; &lt;!-- å®šä¹‰ä¸€è¡Œæ•°æ®æ˜ å°„çš„å¯¹è±¡--&gt; &lt;property name="lineMapper"&gt; &lt;bean class="org.springframework.batch.item.file.mapping.DefaultLineMapper"&gt; &lt;!-- lineTokenizer å¯¹è±¡ï¼Œæ ¹æ®æŸç§åˆ†å‰²ç¬¦åˆ†å‰²--&gt; &lt;property name="lineTokenizer"&gt; &lt;bean class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer"&gt; &lt;!--åˆ†å‰²ç¬¦ï¼Œé»˜è®¤æ˜¯ ","--&gt; &lt;property name="delimiter" value=","/&gt; &lt;!-- lineTokenizer ä¼šæŠŠè¡Œæ•°æ®è½¬æ¢å¯¹åº”æ ¼å¼çš„ FieldSetçš„å¯¹è±¡--&gt; &lt;property name="names" value="id,name,team,goal" /&gt; &lt;/bean&gt; &lt;/property&gt; &lt;!-- fieldSetMapper ä¼šå°†lineTokenizer.tokenize(line) æ‹†åˆ†çš„æ•°æ® --&gt; &lt;property name="fieldSetMapper"&gt; &lt;!--æ˜ å°„åˆ°å¯¹è±¡æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±å®šä¹‰--&gt; &lt;bean class="com.dlc.springBatchDemo.reader.PlayerFieldSetMapper" /&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/property&gt;&lt;/bean&gt; å®šä¹‰éœ€è¦æ˜ å°„çš„å¯¹è±¡ 123456789101112131415161718192021222324252627282930313233343536373839package com.dlc.springBatchDemo.model; public class Player &#123; private int id; private String name; private String team; private int goal; public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public String getTeam() &#123; return team; &#125; public void setTeam(String team) &#123; this.team = team; &#125; public int getGoal() &#123; return goal; &#125; public void setGoal(int goal) &#123; this.goal = goal; &#125;&#125; æ˜ å°„å¤„ç†å¯¹è±¡ 123456789101112131415161718package com.dlc.springBatchDemo.reader;import com.dlc.springBatchDemo.model.Player;import org.springframework.batch.item.file.mapping.FieldSetMapper;import org.springframework.batch.item.file.transform.FieldSet;import org.springframework.validation.BindException;/** æ ¹æ® CSV æ–‡ä»¶ä¸­çš„å­—æ®µé›†åˆæž„å»º Player å¯¹è±¡ */public class PlayerFieldSetMapper implements FieldSetMapper&lt;Player&gt; &#123; public Player mapFieldSet(FieldSet fieldSet) throws BindException &#123; Player player = new Player(); player.setId( fieldSet.readInt( "id" ) ); player.setName( fieldSet.readString( "name" ) ); player.setTeam( fieldSet.readString( "team" ) ); player.setGoal( fieldSet.readInt( "goal" ) ); return player; &#125;&#125; æˆ–åˆ™ç›´æŽ¥ä½¿ç”¨org.springframework.batch.item.file.mappin.BeanWrapperFieldSetMapper ï¼Œ éœ€è¦ CSV è½¬æ¢åˆ—å’Œå¯¹åº” Bean å¯¹è±¡çš„å­—æ®µåå¯¹åº”ã€‚ application context é…ç½®1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;beans&gt; &lt;!-- Spring æ³¨é‡Š --&gt; &lt;context:annotation-config /&gt; &lt;!-- æ‰«åŒ…ï¼Œå¯¼å…¥åŒ…ä¸‹ component --&gt; &lt;context:component-scan base-package="com.com.dlc.springBatchDemo" /&gt; &lt;!-- é…ç½® MySQL Data source --&gt; &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt; &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="url" value="jdbc:mysql://localhost/bacth"/&gt; &lt;property name="username" value="dlc"/&gt; &lt;property name="password" value="dlc"/&gt; &lt;/bean&gt; &lt;!-- Springäº‹åŠ¡ç®¡ç†å™¨, ç”¨äºŽç®¡ç†MySQLäº‹åŠ¡ --&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;/bean&gt; &lt;!-- Spring æä¾›çš„ä¸ŽJDBC connectionsäº¤äº’çš„æ¨¡æ¿è®¾è®¡æ¨¡å¼å®žçŽ°ï¼Œå®žé™…ä¸­ä¸€èˆ¬ä½¿ç”¨Hibernate ç­‰ä»£æ›¿--&gt; &lt;bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate"&gt; &lt;property name="dataSource" ref="dataSource" /&gt; &lt;/bean&gt; &lt;!-- Job Repository: ä¿æŒç€æ‰€æœ‰Jobæ‰§è¡Œçš„ç›¸å…³å…ƒæ•°æ® è¿™é‡Œä½¿ç”¨çš„MapJobRepositoryFactoryBeanç”¨äºŽæµ‹è¯•å’Œå¿«é€ŸåŽŸåž‹ï¼Œä¸å…·å¤‡ Spring Batch å¤šçº¿ç¨‹å’Œåˆ†å‰²ç­‰ï¼ŒMapJobRepositoryFactoryBeanæ˜¯çº¿ç¨‹å®‰å…¨çš„ --&gt; &lt;bean id="jobRepository" class="org.springframework.batch.core.repository.support.MapJobRepositoryFactoryBean"&gt; &lt;property name="transactionManager" ref="transactionManager" /&gt; &lt;/bean&gt; &lt;!-- Job Launcher: javaç¨‹åºæ¥é€šè¿‡JobLauncherå¯åŠ¨ Job --&gt; &lt;bean id="jobLauncher" class="org.springframework.batch.core.launch.support.SimpleJobLauncher"&gt; &lt;property name="jobRepository" ref="jobRepository" /&gt; &lt;/bean&gt; &lt;!-- Reader beanï¼šè®¾ç½®ä¸ºscope è®¾ç½®ä¸º Stepï¼Œå½“å¯¹åº”bean ä½¿ç”¨ Spring Batch çš„ JobParameterså¯åŠ¨æ—¶æ˜¯ä¸å­˜åœ¨ï¼Œä½¿ç”¨ step scope ä½¿Spring Batchåœ¨åˆ›å»ºean æ—¶èƒ½åŠ è½½é…ç½® JobParameters å‚æ•° --&gt; &lt;bean id="productReader" class="org.springframework.batch.item.file.FlatFileItemReader" scope="step"&gt; ... &lt;/bean&gt;&lt;/beans&gt; å¤„ç†ç¨‹åº ï¼ˆProcessorï¼‰å¤„ç†ç¨‹åºä¸æ˜¯ Spring Batch å¤„ç†é‡Œå¿…é¡» å¯¹ CSV æ–‡ä»¶é‡Œçš„æ•°æ®è¿›è¡Œè®¡æ•° 1234567891011121314151617181920212223242526272829303132333435363738394041package com.dlc.springBatchDemo.processor;import com.dlc.springBatchDemo.model.Player;import org.springframework.batch.item.ItemProcessor;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.core.RowMapper;import java.sql.ResultSet;import java.sql.SQLException;import java.util.List;/** * Processor that finds existing players and updates a player goal */public class PlayerGoalProcessor implements ItemProcessor&lt;Player,Player&gt; &#123; private static final String GET_PLAYER = "select * from PLAYER where id = ?"; @Autowired private JdbcTemplate jdbcTemplate; public Player process(Player player) throws Exception &#123; // Retrieve the player from the database List&lt;Player&gt; playerList = jdbcTemplate.query(GET_PLAYER, new Object[] &#123;player.getId()&#125;, new RowMapper&lt;Player&gt;() &#123; public Player mapRow( ResultSet resultSet, int rowNum ) throws SQLException &#123; Player p = new Player(); p.setId( resultSet.getInt( 1 ) ); p.setName( resultSet.getString( 2 ) ); p.setTeam( resultSet.getString( 3 ) ); p.setGoal( resultSet.getInt( 4 ) ); return p; &#125; &#125;); if( playerList.size() &gt; 0 ) &#123; Player existingPlayer = playerList.get( 0 ); player.setGoal( existingPlayer.getGoal() + player.getGoal()) ); &#125; return player; &#125;&#125; PlayerGoalProcessor åªæ˜¯å¯¹æ•°æ®è¿›è¡Œè¿›çƒæ•°æ®è¿›è¡Œæ•°æ®ç»Ÿè®¡ï¼Œæ­¤ processor æ²¡æœ‰è¿›è¡Œæ•°æ®è¿‡æ»¤ï¼Œä½†å¦‚æžœ process() æ–¹æ³•è¿”å›žçš„ç»“æžœæ˜¯ nullï¼Œ åˆ™Spring Batch å°†ä¼šå¿½ç•¥è¿™ä¸ª item, ä¸å°†å…¶å‘é€ç»™ Writer é…ç½® applicationContext.xml å¼•å…¥ Bean 1&lt;bean id="playerGoalProcessor" class="com.dlc.springBatchDemo.processor.PlayerGoalProcessor" /&gt; å†™å·¥å…· ï¼ˆWriterï¼‰â†’æ•°æ®åº“ ï¼ˆDataBaseï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.dlc.springBatchDemo.writer;import com.dlc.springBatchDemo.model.Player;import org.springframework.batch.item.ItemWriter;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.core.RowMapper;import java.sql.ResultSet;import java.sql.SQLException;import java.util.List;/** * Writes players to a database */public class PlayerItemWriter implements ItemWriter&lt;Player&gt;&#123; private static final String GET_PLAYER = "select * from PLAYER where id = ?"; private static final String INSERT_PLAYER = "insert into PLAYER (id,name,team,goal) values (?,?,?,?)"; private static final String UPDATE_PLAYER = "update PLAYER set name = ?, team = ?,goal = ? where id = ?"; @Autowired private JdbcTemplate jdbcTemplate; public void write(List&lt;? extends Player&gt; players) throws Exception &#123; for( Player player : players )&#123; List&lt;Player&gt; playerList = jdbcTemplate.query(GET_PLAYER, new Object[] &#123;player.getId()&#125;, new RowMapper&lt;Player&gt;() &#123; public Player mapRow( ResultSet resultSet, int rowNum ) throws SQLException &#123; Player p = new Player(); p.setId( resultSet.getInt( 1 ) ); p.setName( resultSet.getString( 2 ) ); p.setTeam( resultSet.getString( 3 ) ); p.setGoal( resultSet.getInt( 4 ) ); return p; &#125; &#125;); if( playerList.size() &gt; 0 )&#123; jdbcTemplate.update( UPDATE_PLAYER, player.getName(), player.getTeam(), player.getGoal(), player.getId() ); &#125;else&#123; jdbcTemplate.update( INSERT_PLAYER, player.getId(), player.getName(), player.getTeam(), player.getGoal() ); &#125; &#125; &#125;&#125; é€šè¿‡å®žçŽ°ItemWriterç»§æ‰¿å¹¶å®žçŽ°äº†å…¶å”¯ä¸€çš„æ–¹æ³•: write() ã€‚write() æ–¹æ³•æŽ¥å—ä¸€ä¸ªæ³›åž‹ Player çš„ list . Spring Batch ä½¿ç”¨â€œchunkingâ€ç­–ç•¥å®žçŽ°å…¶ writers , è¯»å–æ—¶æ˜¯ä¸€æ¬¡æ‰§è¡Œä¸€ä¸ªitem, è€Œå†™å…¥æ—¶æ˜¯å°†ä¸€ç»„æ•°æ®ä¸€å—å†™ã€‚ å¯ä»¥é€šè¿‡ commit-interval é…ç½®æŽ§åˆ¶æ¯æ¬¡ä¸€èµ·å†™å…¥çš„itemçš„æ•°é‡ã€‚ applicationContext.xml å¼•å…¥ Bean 1&lt;bean id="playerWriter" class="com.dlc.springBatchDemo.writer.ProductItemWriter" /&gt; é…ç½® Jobimport-csv-job.xml 1234567891011&lt;beans&gt; &lt;!-- Import our beans --&gt; &lt;import resource="classpath:/applicationContext.xml" /&gt; &lt;job id="simpleFileImportJob" xmlns="http://www.springframework.org/schema/batch"&gt; &lt;step id="importFileStep"&gt; &lt;tasklet&gt; &lt;chunk reader="playerReader" processor="playerGoalProcessor" writer="playerWriter" commit-interval="5" /&gt; &lt;/tasklet&gt; &lt;/step&gt; &lt;/job&gt;&lt;/beans&gt; ä¸€ä¸ª job å¯ä»¥åŒ…å« 0 åˆ° å¤šä¸ª step; ä¸€ä¸ª step å¯ä»¥åŒ…å« 0 åˆ° å¤šä¸ª tasklet; ä¸€ä¸ª tasklet å¯ä»¥åŒ…å« 0 åˆ°å¤šä¸ª chunk. ä¸€ä¸ª job å¯ä»¥åŒ…å« 0åˆ°å¤šä¸ª step; ä¸€ä¸ª step å¯ä»¥æœ‰ 0/1 ä¸ªtasklet; ä¸€ä¸ª tasklet å¯ä»¥æœ‰ 0/1 ä¸ª chunkã€‚ å¤šä¸ª processorsé€šè¿‡è®¾è®¡æ‰¹å¤„ç†çš„é€‚å½“çš„ç²’åº¦æ¥åˆ›å»ºå¤šä¸ª item processorï¼Œç„¶åŽæŒ‰é¡ºåºåœ¨åŒä¸€ä¸ª chunkä¹‹ ä¸­æ‰§è¡Œã€‚æ¯”å¦‚ï¼šéœ€è¦processor æ¥æ­£ç¡®åœ°ç®¡ç† item æ•°é‡ï¼Œéœ€è¦è·³è¿‡æŸä¸ªå…«å¼ºè¢«çŒ3ä¸ªçƒåŠ›å¤ºé“¶é´çš„çƒå‘˜ã€‚ 12345678910&lt;bean id="playerGoalProcessor" class="com.dlc.springBatchDemo.processor.PlayerGoalProcessor" /&gt;&lt;bean id="playerFilterProcessor" class="com.dlc.springBatchDemo.processor.playerFilterProcessor" /&gt;&lt;bean id="playerCompositeProcessor" class="org.springframework.batch.item.support.CompositeItemProcessor"&gt; &lt;property name="delegates"&gt; &lt;list&gt; &lt;ref bean="playerFilterProcessor" /&gt; &lt;ref bean="playerGoalProcessor" /&gt; &lt;/list&gt; &lt;/property&gt;&lt;/bean&gt; Taskletsï¼ˆå¾®çº¿ç¨‹ï¼‰Spring Batch ä¼šåˆ†å—è¯»å– CSV æ–‡ä»¶ï¼Œä¾æ¬¡è¯»å–æ¯ä¸€ä¸ª itemï¼Œåœ¨ç»è¿‡ processor å¤„ç†ï¼Œå¤„ç†å®Œæˆä¹‹åŽä¼šå°†ç»“æžœæ”¶é›†å¹¶åˆ†ç»„ä¸º chunks , ç„¶åŽæŠŠè¿™äº›è®°å½•å‘é€ç»™ writer ,åœ¨è¿™é‡Œæ˜¯æ’å…¥åˆ°æ•°æ®åº“ä¸­ã€‚è€Œæœ‰æ—¶éœ€è¦ä¸€ä¸ªæ­¥éª¤çš„ tasklet ä¸è¿›è¡Œè¯»å†™æ“ä½œï¼Œåªè¿›è¡Œå¦‚ï¼šä¸‹è½½æ–‡ä»¶ï¼ŒåŽ‹ç¼©è§£å¯†è§„å®šæ–‡ä»¶ï¼ŒSpring Batch æ”¯æŒ è‡ªå®šä¹‰å®šä¹‰ä¸€ä¸ªtaskletã€‚ ArchivePlayerDataTasklet.java 1234567891011121314151617181920212223242526272829303132333435package com.dlc.springBatchDemo.tasklet;import org.apache.commons.io.FileUtils;import org.springframework.batch.core.StepContribution;import org.springframework.batch.core.scope.context.ChunkContext;import org.springframework.batch.core.step.tasklet.Tasklet;import org.springframework.batch.repeat.RepeatStatus;import java.io.File;/** * Collect player goal data * å®žçŽ°Tasklet æŽ¥å£çš„ execute() æ–¹æ³• */public class ArchivePlayerDataTasklet implements Tasklet&#123; private File inputFile; public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception &#123; File archiveDir = new File( inputFile.getParent() + File.separator+"archive"); FileUtils.forceMkdir( archiveDir ); System.out.println(inputFile); FileUtils.copyFileToDirectory( inputFile , archiveDir ); return RepeatStatus.FINISHED; &#125; public File getInputFile() &#123; return inputFile; &#125; public void setInputFile(File inputFile) &#123; this.inputFile = inputFile; &#125;&#125; applicationContext.xml 123&lt;bean id="archiveFileTasklet" class="com.dlc.springBatchDemo.tasklet.ArchivePlayerDataTasklet" scope="step"&gt; &lt;property name="inputFile" value="#&#123;jobParameters['inputFile']&#125;" /&gt;&lt;/bean&gt; import-csv-job.xml 123456789&lt;beans&gt; &lt;!-- Import our beans --&gt; &lt;import resource="classpath:/applicationContext.xml" /&gt; &lt;job id="simpleFileImportJob" xmlns="http://www.springframework.org/schema/batch"&gt; &lt;step id="archive"&gt; &lt;tasklet id="archiveFileTasklet"&gt;&lt;/tasklet&gt; &lt;/step&gt; &lt;/job&gt;&lt;/beans&gt; Resiliencyï¼ˆå¼¹æ€§ï¼‰ Skipping Items(è·³è¿‡æŸé¡¹) è·³è¿‡æŸäº›è®°å½•, æ¯”å¦‚ reader è¯»å–çš„æ— æ•ˆè®°å½•,æˆ–è€…å¤„ç†/å†™å…¥è¿‡ç¨‹ä¸­å‡ºçŽ°å¼‚å¸¸çš„å¯¹è±¡ã€‚ è¦è·³è¿‡è®°å½•æœ‰ä¸¤ç§æ–¹å¼: åœ¨ chunk å…ƒç´ ä¸Šå®šä¹‰ skip-limit å±žæ€§, å‘Šè¯‰Spring æœ€å¤šå…è®¸è·³è¿‡å¤šå°‘ä¸ª items,è¶…è¿‡åˆ™ job å¤±è´¥(å¦‚æžœæ— æ•ˆè®°å½•å¾ˆå°‘é‚£å¯ä»¥æŽ¥å—,ä½†å¦‚æžœæ— æ•ˆè®°å½•å¤ªå¤š,é‚£å¯èƒ½è¾“å…¥æ•°æ®å°±æœ‰é—®é¢˜äº†)ã€‚ å®šä¹‰ä¸€ä¸ª skippable-exception-classes åˆ—è¡¨, ç”¨æ¥åˆ¤æ–­å½“å‰è®°å½•æ˜¯å¦å¯ä»¥è·³è¿‡, å¯ä»¥æŒ‡å®š include å…ƒç´ æ¥å†³å®šå‘ç”Ÿå“ªäº›å¼‚å¸¸æ—¶ä¼šè·³è¿‡å½“å‰è®°å½•, è¿˜å¯ä»¥æŒ‡å®š exclude å…ƒç´ æ¥å†³å®šå“ªäº›å¼‚å¸¸ä¸ä¼šè§¦å‘ skip( æ¯”å¦‚ä½ æƒ³è·³è¿‡æŸä¸ªå¼‚å¸¸å±‚æ¬¡çˆ¶ç±», ä½†æŽ’é™¤ä¸€æˆ–å¤šä¸ªå­ç±»å¼‚å¸¸æ—¶)ã€‚ ç¤ºä¾‹å¦‚ä¸‹: 1234567891011&lt;job id="simpleFileImportJob" xmlns="http://www.springframework.org/schema/batch"&gt; &lt;step id="importFileStep"&gt; &lt;tasklet&gt; &lt;chunk reader="productReader" processor="productProcessor" writer="productWriter" commit-interval="5" skip-limit="10"&gt; &lt;skippable-exception-classes&gt; &lt;include class="org.springframework.batch.item.file.FlatFileParseException" /&gt; &lt;/skippable-exception-classes&gt; &lt;/chunk&gt; &lt;/tasklet&gt; &lt;/step&gt;&lt;/job&gt; è¿™é‡Œåœ¨å¤„ç†æŸæ¡è®°å½•æ—¶å¦‚æžœæŠ›å‡º FlatFileParseException å¼‚å¸¸, åˆ™è¿™æ¡è®°å½•å°†è¢«è·³è¿‡ã€‚ å¦‚æžœè¶…è¿‡10æ¬¡ skip, é‚£ä¹ˆç›´æŽ¥è®© job å¤±è´¥ã€‚ é‡è¯•ï¼ˆRetrying Itemsï¼‰ æœ‰æ—¶å‘ç”Ÿçš„å¼‚å¸¸æ˜¯å¯ä»¥é‡è¯•çš„, å¦‚ç”±äºŽè¯»å…¥æ•°æ®åº“é”å¯¼è‡´çš„å¤±è´¥ã€‚ é‡è¯•(Retry)çš„å®žçŽ°å’Œè·³è¿‡(Skip)éžå¸¸ç›¸ä¼¼: åœ¨ chunk å…ƒç´ ä¸Šå®šä¹‰ retry-limit å±žæ€§, å‘Šè¯‰Spring æ¯ä¸ª item æœ€å¤šå…è®¸é‡è¯•å¤šå°‘æ¬¡, è¶…è¿‡åˆ™è®¤ä¸ºè¯¥è®°å½•å¤„ç†å¤±è´¥ã€‚ å¦‚æžœåªç”¨é‡è¯•, ä¸æŒ‡å®šè·³è¿‡,åˆ™å¦‚æžœæŸæ¡è®°å½•é‡è¯•å¤„ç†å¤±è´¥, åˆ™ jobå°†è¢«æ ‡è®°ä¸ºå¤±è´¥ã€‚ å®šä¹‰ä¸€ä¸ª retryable-exception-classes åˆ—è¡¨, ç”¨æ¥åˆ¤æ–­å½“å‰è®°å½•æ˜¯å¦å¯ä»¥é‡è¯•; å¯ä»¥æŒ‡å®š include å…ƒç´ æ¥å†³å®šå“ªäº›å¼‚å¸¸å‘ç”Ÿæ—¶å½“å‰è®°å½•å¯ä»¥é‡è¯•, è¿˜å¯ä»¥æŒ‡å®š exclude å…ƒç´ æ¥å†³å®šå“ªäº›å¼‚å¸¸ä¸å¯¹å½“å‰è®°å½•é‡è¯•æ‰§è¡Œ.ã€‚ ä¾‹å¦‚: 1234567891011&lt;job id=&quot;simpleFileImportJob&quot; xmlns=&quot;http://www.springframework.org/schema/batch&quot;&gt; &lt;step id=&quot;importFileStep&quot;&gt; &lt;tasklet&gt; &lt;chunk reader=&quot;productReader&quot; processor=&quot;productProcessor&quot; writer=&quot;productWriter&quot; commit-interval=&quot;5&quot; retry-limit=&quot;5&quot;&gt; &lt;retryable-exception-classes&gt; &lt;include class=&quot;org.springframework.dao.OptimisticLockingFailureException&quot; /&gt; &lt;/retryable-exception-classes&gt; &lt;/chunk&gt; &lt;/tasklet&gt; &lt;/step&gt;&lt;/job&gt; è¿˜å¯ä»¥å°†é‡è¯•å’Œå¯è·³è¿‡çš„å¼‚å¸¸é€šè¿‡ skippable exception ä¸Ž retry exception å¯¹åº”èµ·æ¥ã€‚ å› æ­¤, å¦‚æžœæŸä¸ªå¼‚å¸¸è§¦å‘äº†5æ¬¡é‡è¯•, 5æ¬¡é‡è¯•ä¹‹åŽè¿˜æ²¡æžå®š, æ°å¥½è¯¥å¼‚å¸¸ä¹Ÿåœ¨ skippable åˆ—è¡¨ä¸­, åˆ™è¿™æ¡è®°å½•å°†è¢«è·³è¿‡ã€‚ å¦‚æžœ exception ä¸åœ¨ skippable åˆ—è¡¨åˆ™ä¼šè®©æ•´ä¸ª job å¤±è´¥ã€‚ é‡å¯ job å¯¹äºŽæ‰§è¡Œå¤±è´¥çš„ jobä½œä¸š, æˆ‘ä»¬å¯ä»¥é‡æ–°å¯åŠ¨,å¹¶è®©ä»–ä»¬ä»Žä¸Šæ¬¡æ–­å¼€çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚ è¦åšåˆ°è¿™ä¸€ç‚¹, åªéœ€è¦ä½¿ç”¨å’Œä¸Šæ¬¡ä¸€æ¨¡ä¸€æ ·çš„å‚æ•°æ¥å¯åŠ¨ job, åˆ™ Spring Batch ä¼šè‡ªåŠ¨ä»Žæ•°æ®åº“ä¸­æ‰¾åˆ°è¿™ä¸ªå®žä¾‹ç„¶åŽç»§ç»­æ‰§è¡Œã€‚ é…ç½®æ•°æ®åº“ç”±äºŽé…ç½®é‡Œä½¿ç”¨çš„æ˜¯ MapJobRepositoryFactoryBean ï¼ŒSpring Batch é»˜è®¤ä½¿ç”¨çš„å†…å­˜æ•°æ®ï¼Œåªéœ€è¦åˆ›å»º Player å¯¹è±¡çš„è¡¨ 1234567CREATE TABLE PLAYER ( ID INT NOT NULL, NAME VARCHAR(128) NOT NULL, TEAM VARCHAR(128), GOAL INT, PRIMARY KEY(ID) ); å¦‚æžœSpring Batch éœ€è¦ä½¿ç”¨ Mysql å°†&lt;bean id=&quot;jobRepository&quot;&gt; æ”¹ä¸º 1&lt;batch:job-repository id="jobRepository" data-source="dataSource" /&gt; åŒæ—¶éœ€è¦æ‰‹åŠ¨å¯¼å…¥ Spring Batch çš„è¡¨ spring-batch-core.jar/org/springframework/batch/core/schema-mysql.sql å¦‚æžœåªæ˜¯æµ‹è¯•ä¹Ÿå¯ä»¥åœ¨ applicationContext.xml é‡Œæ·»åŠ  1234&lt;jdbc:initialize-database data-source="dataSource"&gt; &lt;jdbc:script location="org/springframework/batch/core/schema-drop-mysql.sql" /&gt; &lt;jdbc:script location="org/springframework/batch/core/schema-mysql.sql" /&gt;&lt;/jdbc:initialize-database&gt; æµ‹è¯•æ‰¹é‡ä»»åŠ¡åœ¨æµ‹è¯•èµ„æºç›®å½•resources\æ·»åŠ éœ€è¦å¯¼å…¥çš„æ–‡ä»¶ sample.csv 12345678id,name,team,goal1,Cristiano Ronaldo,Real Madrid, 122,Lionel Messi,Barcelona, 113,Lewandowski,Bayern MÃ¼nchen, 84,Cavani,Paris Saint-Germain, 85,Aubameyang,Dortmund, 76,MbappÃ©,Monaco, 67,Griezmann,Barcelona, 6 pom é‡Œæ·»åŠ ä¾èµ– 1234567891011121314151617181920212223242526&lt;project&gt; ... &lt;dependencies&gt; ... &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.batch&lt;/groupId&gt; &lt;artifactId&gt;spring-batch-test&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.batch.version&#125;&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; ... &lt;/dependencies&gt; ...&lt;/project&gt; æ·»åŠ å•å…ƒæµ‹è¯•ç±» AppTest.java 123456789101112131415161718192021222324252627282930313233343536373839package com.dlc.springBatchDemo;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.batch.core.*;import org.springframework.batch.core.launch.JobLauncher;import org.springframework.batch.item.ExecutionContext;import org.springframework.batch.item.ItemReader;import org.springframework.batch.item.ItemStream;import org.springframework.batch.test.JobLauncherTestUtils;import org.springframework.batch.test.StepScopeTestExecutionListener;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.TestExecutionListeners;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;import org.springframework.test.context.support.DependencyInjectionTestExecutionListener;import java.util.Date;import static org.junit.Assert.assertEquals;@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(&#123; "classpath:/applicationContext.xml","classpath:/jobs/csv-import-job.xml","classpath:test-contxt.xml"&#125;)public class BatchSpringContextTest &#123; @Autowired private Job csvImportJob; @Autowired private JobLauncherTestUtils jobLauncherTestUtils; @Test public void launchJobWithJobLauncherTest() throws Exception &#123; JobParameters jobParameters = new JobParametersBuilder().addString("inputFile","sample.csv").toJobParameters(); jobLauncherTestUtils.setJob(csvImportJob); JobExecution jobExecution = jobLauncherTestUtils.launchJob(jobParameters); assertEquals(BatchStatus.COMPLETED, jobExecution.getStatus()); &#125;&#125; Spring Batch Demo å­¦ä¹ å‚è€ƒè‡ª Reading and writing CVS files with Spring Batch and MySQL]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Maven å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰]]></title>
      <url>%2F2017%2F06%2F19%2FMaven-Note-4%2F</url>
      <content type="text"><![CDATA[Maven æ˜¯é€šè¿‡è®¾è®¡çš„æ’ä»¶æœºåˆ¶æ¥å®žçŽ° Maven æž„ä»¶é¡¹ç›®çš„çš„å‘¨æœŸ. æ¯”å¦‚ :ç¼–è¯‘å‘¨æœŸæœ‰ maven-compiler-plugin, è€Œé’ˆå¯¹æµ‹è¯•æ’ä»¶æœ‰ maven-surefire-plugin ç­‰.Maven æ‹¥æœ‰3å¥—ç›¸äº’ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸ,clean, default å’Œ site. clean ç”Ÿå‘½å‘¨æœŸçš„ç›®çš„æ˜¯ä¸ºäº†æ¸…ç†é¡¹ç›®, defaultç”Ÿå‘½å‘¨æœŸçš„ç›®çš„æ˜¯ä¸ºäº†æž„ä»¶é¡¹ç›®, siteç”Ÿå‘½å‘¨æœŸçš„ç›®çš„æ˜¯ä¸ºäº†å»ºç«‹é¡¹ç›®ç«™ç‚¹. clean é˜¶æ®µ pre-clean æ‰§è¡Œä¸€äº›æ¸…ç†å‰éœ€è¦å®Œæˆçš„å·¥ä½œ clean æ¸…ç†ä¸Šä¸€æ¬¡æž„ä»¶ç”Ÿæˆçš„æ–‡ä»¶ post-clean æ‰§è¡Œä¸€äº›æ¸…ç†åŽéœ€è¦å®Œæˆçš„å·¥ä½œ default é˜¶æ®µ validate éªŒè¯é¡¹ç›®æ˜¯æ­£ç¡®çš„, æ‰€æœ‰é‡è¦çš„ä¿¡æ¯æ˜¯å¯ç”¨ initialize åˆå§‹åŒ–æž„å»ºçŠ¶æ€, eg: è®¾ç½®å±žæ€§, åˆ›å»ºç›®å½• generate-sources ç¼–è¯‘åŽŸä»£ç  process-sources å¤„ç†æºä»£ç , eg: è¿‡æ»¤ä¸€äº›å€¼ genreate-resources ç”Ÿæˆèµ„æºæ–‡ä»¶ process-resources å¤åˆ¶å’Œå¤„ç†èµ„æºåˆ°ç›®æ ‡ç›®å½•ï¼Œå‡†å¤‡è¿›è¡Œæ‰“åŒ… compile ç¼–è¯‘é¡¹ç›®çš„æºä»£ç  process-classes å¤„ç†ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶, æ¯”å¦‚JAVAæ–‡ä»¶çš„å­—èŠ‚ç  generate-test-sources ç”Ÿæˆæµ‹è¯•ç¼–è¯‘æ–‡ä»¶çš„ process-test-sources å¤„ç†æµ‹è¯•æºä»£ç , eg: è¿‡æ»¤ä¸€äº›å€¼ genreate-test-resources åˆ›å»ºæµ‹è¯•é…ç½®æ–‡ä»¶ process-test-resources å¤åˆ¶å’Œå¤„ç†èµ„æºåˆ°æµ‹è¯•ç›®æ ‡ç›®å½• test-compile ç¼–è¯‘é¡¹ç›®æµ‹è¯•çš„æºä»£ç åˆ°æŒ‡å®šç›®å½• process-test-classes å¤„ç†æµ‹è¯•ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ test ä½¿ç”¨å•å…ƒæµ‹è¯•æ¡†æž¶è¿è¡Œæµ‹è¯•, æµ‹è¯•æºä»£ç ä¸ä¼šè¢«æ‰“åŒ… prepare-package å‡†å¤‡æ‰“åŒ…ç‰ˆæœ¬ package æŽ¥æ”¶ç¼–è¯‘ä»£ç ï¼Œæ‰“åŒ…æˆä¸€ä¸ªå¯å‘å¸ƒæ ¼å¼ï¼Œä¾‹å¦‚ä¸€ä¸ªJAR pre-integration-test é›†æˆåˆ°æµ‹è¯•çŽ¯å¢ƒå‰éœ€è¦é‡‡å–çš„è¡ŒåŠ¨, eg: é…ç½®æµ‹è¯•çŽ¯å¢ƒ integration-test å¤„ç†ï¼Œå¹¶éƒ¨ç½²åŒ…åœ¨ä¸­ï¼Œé›†æˆåˆ°æµ‹è¯•çŽ¯å¢ƒä¸­(å¦‚æžœæœ‰å¿…è¦) post-integration-test è¿›è¡Œé›†æˆæµ‹è¯•æ‰§è¡ŒåŽéœ€è¦é‡‡å–çš„è¡ŒåŠ¨ eg: æ¸…ç†çŽ¯å¢ƒ verify è¿è¡Œä»»ä½•æ£€æŸ¥ï¼Œä»¥éªŒè¯åŒ…æ˜¯æœ‰æ•ˆæ€§ï¼Œå¹¶ç¬¦åˆæ ‡å‡† install å®‰è£…åŒ…åˆ°æœ¬åœ°ä»“åº“ï¼Œç”¨ä½œå½“åœ°å…¶ä»–é¡¹ç›®çš„ä¾èµ– deploy å°†åŒ…éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“, ä¸Žå…¶ä»–å¼€å‘äººå‘˜å…±äº«å’Œé¡¹ç›® site é˜¶æ®µ pre-site æ‰§è¡Œä¸€äº›ç”Ÿæˆé¡¹ç›®ç«™ç‚¹ä¹‹å‰éœ€è¦å®Œæˆçš„å·¥ä½œ site ç”Ÿæˆé¡¹ç›®ç«™ç‚¹æ–‡ä»¶ post-site æ‰§è¡Œä¸€äº›ç”Ÿæˆé¡¹ç›®ç«™ç‚¹ä¹‹åŽéœ€è¦å®Œæˆçš„å·¥ä½œ site-deploy å°†é¡¹ç›®ç«™ç‚¹å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸Š ##å‘½ä»¤å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸ: $mvn clean è°ƒç”¨ clean ç”Ÿå‘½å‘¨æœŸçš„cleané˜¶æ®µ. å®žé™…æ‰§è¡Œé˜¶æ®µä¸º clean ç”Ÿå‘½å‘¨æœŸçš„ pre-clean å’Œ cleané˜¶æ®µ $mvn test è°ƒç”¨ default ç”Ÿå‘½å‘¨æœŸçš„ test é˜¶æ®µ. å®žé™…æ‰§è¡Œé˜¶æ®µä¸º default ç”Ÿå‘½å‘¨æœŸçš„ validate , initializeç­‰é˜¶æ®µ, ç›´åˆ° test æ‰€æœ‰é˜¶æ®µ $mvn clean install è°ƒç”¨ clean ç”Ÿå‘½å‘¨æœŸçš„ clean é˜¶æ®µå’Œ default ç”Ÿå‘½å‘¨æœŸçš„ install é˜¶æ®µ. å®žé™…æ‰§è¡Œé˜¶æ®µä¸º clean ç”Ÿå‘½å‘¨æœŸçš„ pre-clean å’Œ clean é˜¶æ®µ, å’Œ default ç”Ÿå‘½å‘¨æœŸçš„ validate , initializeç­‰é˜¶æ®µ, ç›´åˆ° install æ‰€æœ‰é˜¶æ®µ $mvn clean deploy site-deploy è°ƒç”¨ clean ç”Ÿå‘½å‘¨æœŸçš„ clean é˜¶æ®µå’Œ default ç”Ÿå‘½å‘¨æœŸçš„ deploy é˜¶æ®µ, ä»¥åŠ site ç”Ÿå‘½å‘¨æœŸçš„ deploy-site é˜¶æ®µ. å®žé™…æ‰§è¡Œé˜¶æ®µä¸º clean ç”Ÿå‘½å‘¨æœŸçš„ pre-clean å’Œ clean é˜¶æ®µ, å’Œ default ç”Ÿå‘½å‘¨æœŸçš„æ‰€æœ‰é˜¶æ®µ, site ç”Ÿå‘½å‘¨æœŸæ‰€æœ‰é˜¶æ®µ.]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Maven å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰]]></title>
      <url>%2F2017%2F05%2F15%2FMaven-Note-3%2F</url>
      <content type="text"><![CDATA[Maven ä¸­, ä»»ä½•ä¸€ä¸ªä¾èµ–,æ’ä»¶æˆ–è€…é¡¹ç›®æž„å»ºçš„è¾“å‡º, è¢«ç§°ä¸ºæž„ä»¶. åˆ©ç”¨åæ ‡æœºåˆ¶, Maven ä¼šä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€ä½ç½®æ¥å­˜å‚¨æ‰€æœ‰Mavené¡¹ç›®å…±äº«çš„æž„å»º, å°±æ˜¯ Maven ä»“åº“. å¯¹åº”ä¸€ä¸ªæž„å»ºåœ¨Mavenä»“åº“çš„è·¯å¾„ä¸€èˆ¬ä¸º groupId/artifactId/version/artifactId-version[-classifier].packaging Maven ä»“åº“çš„åˆ†ç±» æœ¬åœ°ä»“åº“ æœ¬æœºç”¨æˆ·ç›®å½•ä¸‹çš„.m2/repository å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶(~/.m2/settings.xml)è‡ªå®šä¹‰æœ¬åœ°ä»“åº“ç›®å½•, ä¹Ÿå¯ä»¥ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶($MAVEN_HOME/conf/settings.xml) 123&lt;settings&gt; &lt;localRepository&gt;customer Path &lt;/localRepository&gt;&lt;/settings&gt; è¿œç¨‹ä»“åº“ åŒ…æ‹¬ä¸­å¤®ä»“åº“å’Œç§æœ, å¯ä»¥ä¿®æ”¹é…æ–‡ä»¶æˆ–è€…POMæ–‡ä»¶æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697 &lt;settings&gt; ... &lt;profiles&gt; &lt;profile&gt; &lt;!-- profileé…ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ --&gt; &lt;id&gt;&lt;/id&gt; &lt;activation&gt; &lt;!--profileé»˜è®¤æ˜¯å¦æ¿€æ´»çš„æ ‡è¯† --&gt; &lt;activeByDefault&gt;false&lt;/activeByDefault&gt; &lt;!--æ£€æµ‹jdkç‰ˆæœ¬ï¼Œä¸Žè®¾ç½®ä¸€æ ·profileè¢«æ¿€æ´»ã€‚ --&gt; &lt;jdk&gt;1.7&lt;/jdk&gt; &lt;!--åŒ¹é…çš„æ“ä½œç³»ç»Ÿå±žæ€§è¢«æ£€æµ‹åˆ°ï¼Œprofileè¢«æ¿€æ´» --&gt; &lt;os&gt; &lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿçš„åå­— --&gt; &lt;name&gt;Windows XP&lt;/name&gt; &lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿæ‰€å±žå®¶æ—(å¦‚ 'windows') --&gt; &lt;family&gt;Windows&lt;/family&gt; &lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿä½“ç³»ç»“æž„ --&gt; &lt;arch&gt;x86&lt;/arch&gt; &lt;!--æ¿€æ´»profileçš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ --&gt; &lt;version&gt;5.1.2600&lt;/version&gt; &lt;/os&gt; &lt;!--å¦‚æžœMavenæ£€æµ‹åˆ°æŸä¸€ä¸ªå±žæ€§ï¼ˆå…¶å€¼å¯ä»¥åœ¨POMä¸­é€šè¿‡$&#123;åç§°&#125;å¼•ç”¨ï¼‰ï¼Œå…¶æ‹¥æœ‰å¯¹åº”çš„åç§°å’Œå€¼ï¼ŒProfileå°±ä¼šè¢«æ¿€æ´»ã€‚--&gt; &lt;!--å¦‚æžœå€¼å­—æ®µæ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå­˜åœ¨å±žæ€§åç§°å­—æ®µå°±ä¼šæ¿€æ´»profileï¼Œå¦åˆ™æŒ‰åŒºåˆ†å¤§å°å†™æ–¹å¼åŒ¹é…å±žæ€§å€¼å­—æ®µ --&gt; &lt;property&gt; &lt;!--æ¿€æ´»profileçš„å±žæ€§çš„åç§° --&gt; &lt;name&gt;mavenVersion&lt;/name&gt; &lt;!--æ¿€æ´»profileçš„å±žæ€§çš„å€¼ --&gt; &lt;value&gt;2.0.3&lt;/value&gt; &lt;/property&gt; &lt;!--æä¾›ä¸€ä¸ªæ–‡ä»¶åï¼Œé€šè¿‡æ£€æµ‹è¯¥æ–‡ä»¶çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨æ¥æ¿€æ´»profileã€‚--&gt; &lt;file&gt; &lt;!--å¦‚æžœæŒ‡å®šçš„æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt; &lt;exists&gt;/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/&lt;/exists&gt; &lt;!--å¦‚æžœæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ¿€æ´»profileã€‚ --&gt; &lt;missing&gt;/usr/local/hudson/hudson-home/jobs/maven-guide-zh-to-production/workspace/&lt;/missing&gt; &lt;/file&gt; &lt;/activation&gt; &lt;!--å¯¹åº”profileçš„æ‰©å±•å±žæ€§åˆ—è¡¨ã€‚Mavenå±žæ€§å’ŒAntä¸­çš„å±žæ€§ä¸€æ ·ï¼Œå¯ä»¥ç”¨æ¥å­˜æ”¾ä¸€äº›å€¼ã€‚è¿™äº›å€¼å¯ä»¥åœ¨POMä¸­çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨æ ‡è®°$&#123;X&#125;æ¥ä½¿ç”¨ï¼Œè¿™é‡ŒXæ˜¯æŒ‡å±žæ€§çš„åç§°ã€‚--&gt; &lt;!--å±žæ€§æœ‰äº”ç§ä¸åŒçš„å½¢å¼ï¼Œå¹¶ä¸”éƒ½èƒ½åœ¨settings.xmlæ–‡ä»¶ä¸­è®¿é—®ã€‚ --&gt; &lt;!--1. env.X: åœ¨ä¸€ä¸ªå˜é‡å‰åŠ ä¸Š"env."çš„å‰ç¼€ï¼Œä¼šè¿”å›žä¸€ä¸ªshellçŽ¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚,"env.PATH"æŒ‡ä»£äº†$pathçŽ¯å¢ƒå˜é‡ï¼ˆåœ¨Windowsä¸Šæ˜¯%PATH%ï¼‰ã€‚ --&gt; &lt;!--2. project.xï¼šæŒ‡ä»£äº†POMä¸­å¯¹åº”çš„å…ƒç´ å€¼ã€‚ --&gt; &lt;!--3. settings.x: æŒ‡ä»£äº†settings.xmlä¸­å¯¹åº”å…ƒç´ çš„å€¼ã€‚ --&gt; &lt;!--4. Java System Properties: æ‰€æœ‰å¯é€šè¿‡java.lang.System.getProperties()è®¿é—®çš„å±žæ€§éƒ½èƒ½åœ¨POMä¸­ä½¿ç”¨è¯¥å½¢å¼è®¿é—®ï¼Œ --&gt; &lt;!-- å¦‚/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jreã€‚ --&gt; &lt;!--5. x: åœ¨&lt;properties/&gt;å…ƒç´ ä¸­ï¼Œæˆ–è€…å¤–éƒ¨æ–‡ä»¶ä¸­è®¾ç½®ï¼Œä»¥$&#123;someVar&#125;çš„å½¢å¼ä½¿ç”¨ã€‚ --&gt; &lt;properties&gt; &lt;!-- è¿™ä¸ªprofileè¢«æ¿€æ´»ï¼Œåˆ™å±žæ€§$&#123;user.install&#125;å°±å¯ä»¥è¢«è®¿é—®äº† --&gt; &lt;user.install&gt;&lt;/user.install&gt; &lt;/properties&gt; &lt;!-- POMæ–‡ä»¶ä¿®æ”¹åœ¨ project æ ‡ç­¾å†…æ·»åŠ  --&gt; &lt;repositories&gt; &lt;repository&gt; &lt;!-- ä»“åº“ID, å”¯ä¸€çš„, Mavenè‡ªå¸¦çš„ä¸­å¤®ä»“åº“ä½¿ç”¨çš„IDæ˜¯central, å¦‚æžœæ·»åŠ çš„å…¶å®ƒä»“åº“ä¹Ÿä½¿ç”¨äº†è¯¥ID, ä¼šè¦†ç›– --&gt; &lt;id&gt;&lt;/id&gt; &lt;name&gt;&lt;/name&gt; &lt;url&gt;&lt;/url&gt; &lt;!-- æ˜¯å¦æ”¯æŒå‘å¸ƒç‰ˆæœ¬ä¸‹è½½ --&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;!-- é…ç½®æ›´æ–°é¢‘çŽ‡, é»˜è®¤daily, æ¯å¤©æ£€æŸ¥ä¸€æ¬¡. never ä»Žä¸æ£€æŸ¥æ›´æ–° always æ¯æ¬¡æž„å»ºæ—¶æ£€æŸ¥æ›´æ–° interval: X æ¯éš”Xåˆ†é’Ÿæ£€æŸ¥æ›´æ–° --&gt; &lt;updatePolicy&gt;&lt;/updatePolicy&gt; &lt;!-- é…ç½®æ£€æŸ¥æ£€éªŒå’Œæ–‡ä»¶ç­–ç•¥, æž„å»ºæ—¶ä¸‹è½½æž„ä»¶å‡ºçŽ°æ ¡éªŒå’ŒéªŒè¯çš„å¤±è´¥, é»˜è®¤ä¸ºwarn, ä¼šè¾“å‡ºè­¦å‘Šä¿¡æ¯ fail Mavené‡åˆ°æ ¡éªŒå’ŒéªŒè¯çš„å¤±è´¥, è®©æž„å»ºå¤±è´¥ ignore Mavenå®Œå…¨å¿½ç•¥æ ¡éªŒå’ŒéªŒè¯çš„å¤±è´¥é”™è¯¯ --&gt; &lt;checksumPolicy&gt;&lt;/checksumPolicy&gt; &lt;/releases&gt; &lt;!-- æ˜¯å¦æ”¯æŒå¿«ç…§ç‰ˆæœ¬ä¸‹è½½ --&gt; &lt;snapshots&gt; &lt;enabled&gt;false&lt;/enabled&gt; &lt;/snapshots&gt; &lt;layout&gt;default&lt;/layout&gt; &lt;/repository&gt; &lt;!-- å¯ä»¥æ·»åŠ å¤šä¸ªåœ°å€ --&gt; &lt;repository&gt; ... &lt;/repository&gt; &lt;/repositories&gt; &lt;/profile&gt; &lt;/profiles&gt; &lt;servers&gt; &lt;server&gt; &lt;!-- å¯¹åº”Repositoryçš„ID --&gt; &lt;id&gt;&lt;id&gt; &lt;username&gt;&lt;/username&gt; &lt;password&gt;&lt;/password&gt; &lt;/server&gt; &lt;/servers&gt; ...&lt;/settings&gt; éƒ¨ç½²è‡³è¿œç¨‹ä»“åº“ç§æœå¯ä»¥éƒ¨ç½²ç¬¬ä¸‰æ–¹æž„ä»¶, å¯ä»¥é€šè¿‡é…ç½®POMæ–‡ä»¶æˆ–è€…éƒ¨ç½²å‘½ä»¤å°†é¡¹ç›®ç”Ÿæˆçš„æž„ä»¶éƒ¨ç½²åˆ°ä»“åº“ä¸­. 12345678910111213141516&lt;project&gt; ... &lt;distributionManagement&gt; &lt;repositroy&gt; &lt;id&gt;Release Repository ID&lt;/id&gt; &lt;name&gt;Release Repository Name&lt;/name&gt; &lt;url&gt;deploy URL&lt;/url&gt; &lt;/repositroy&gt; &lt;snapshotRepository&gt; &lt;id&gt;Snapshot Repository ID&lt;/id&gt; &lt;name&gt;Snapshot Repository Name&lt;/name&gt; &lt;url&gt;deploy URL&lt;/url&gt; &lt;/snapshotRepository&gt; &lt;/distributionManagement&gt; ...&lt;/project&gt; é…ç½®å®ŒåŽ, å‘½ä»¤è¿è¡Œmvn clean deployå³å¯.å¦‚æžœä¸é…ç½®POM, åˆ™ä½¿ç”¨: 1234mvn clean deploy -U -Dmaven.test.skip=true -DaltDeploymentRepository=id::layout::url # id: å¯¹ åº” setting ä¸­&lt;servers&gt;æ ‡ç­¾é‡Œé…ç½®çš„ Repository ID# layout: Either default for the Maven2 layout or legacy for the Maven1 layout. Maven3 also uses the default layout.# url: The location of the repository éƒ¨ç½²æˆ–è€…æ˜¯ä¸‹è½½æž„ä»¶åˆ°è¿œç¨‹ä»“åº“, å½“éœ€è¦è®¤è¯æ—¶, é…ç½®æ–¹å¼éƒ½æ˜¯ä¸€è‡´çš„. å¿«ç…§ç‰ˆæœ¬åœ¨å¿«ç…§å‘å¸ƒåˆ°ç§æœæ—¶, Maven ä¼šè‡ªåŠ¨ä¸ºæž„ä»¶æ‰“ä¸Šæ—¶é—´æˆ³, å½“æž„å»ºæœ€æ–°é¡¹ç›®æ—¶, Mavenä¼šä»Žä»“åº“ä¸­æ£€æŸ¥å¯¹åº”å¿«ç…§ç‰ˆæœ¬çš„é»˜è®¤çš„æœ€æ–°æž„ä»¶, å‘çŽ°æœ‰æ›´æ–°æ—¶ä¼šä¸‹è½½. é»˜è®¤æƒ…å†µä¸‹(æœªä¿®æ”¹snapshotsä¸‹çš„updatePolicy), Maven ä¼šæ¯å¤©æ£€æŸ¥ä¸€æ¬¡æ›´æ–°, æž„å»ºæ—¶å¯ä»¥ä½¿ç”¨ -U å¼ºåˆ¶æ£€æŸ¥æ›´æ–°. 1mvn clean install -e -U -Dmaven.skip=true ä»Žä»“åº“è§£æžä¾èµ–çš„æœºåˆ¶ å½“ä¾èµ–èŒƒå›´æ˜¯ system çš„æ—¶å€™, Maven ç›´æŽ¥ä»Žæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè§£æžæž„ä»¶. æ ¹æ®ä¾èµ–åæ ‡è®¡ç®—ä»“åº“è·¯å¾„, å°è¯•ç›´æŽ¥ä»Žæœ¬åœ°ä»“åº“å¯»æ‰¾æž„ä»¶, å¦‚æžœå‘çŽ°ç›¸åº”æž„ä»¶, åˆ™è§£æžæˆåŠŸ. åœ¨æœ¬åœ°ä»“åº“ä¸å­˜åœ¨ç›¸åº”æž„ä»¶çš„æƒ…å†µä¸‹, å¦‚æžœä¾èµ–çš„ç‰ˆæœ¬æ˜¯æ˜¾ç¤ºçš„å‘å¸ƒç‰ˆæœ¬æž„ä»¶, å¦‚ 1.1, 2.3 ç­‰, åˆ™éåŽ†æ‰€æœ‰è¿œç¨‹ä»“åº“, å‘çŽ°åŽ, ä¸‹è½½å¹¶è§£æžä½¿ç”¨. å¦‚æžœä¾èµ–çš„ç‰ˆæœ¬æ˜¯ RELEASE æˆ–è€… LATEST, åˆ™åŸºäºŽæ›´æ–°ç­–ç•¥è¯»å–æ‰€æœ‰è¿œç¨‹ä»“åº“çš„å…ƒæ•°æ® groupId/artifactId/version/maven-metadata.xml, å°†å…¶ä¸Žæœ¬åœ°ä»“åº“çš„å¯¹åº”å…ƒæ•°æ®åˆå¹¶åŽ, è®¡ç®—å‡º RELEASE çš„çœŸå®žå€¼, ç„¶åŽåŸºäºŽè¿™ä¸ªçœŸå®žå€¼æ£€æŸ¥æœ¬åœ°å’Œè¿œç¨‹ä»“åº“ å¦‚æžœä¾èµ–çš„ç‰ˆæœ¬æ˜¯ SNAPSHOT, åˆ™åŸºäºŽæ›´æ–°ç­–ç•¥è¯»å–æ‰€æœ‰è¿œç¨‹ä»“åº“çš„ä¸Žåˆ™åŸºäºŽæ›´æ–°ç­–ç•¥è¯»å–æ‰€æœ‰è¿œç¨‹ä»“åº“çš„å…ƒæ•°æ® groupId/artifactId/version/maven-metadata.xml, å°†å…¶ä¸Žæœ¬åœ°ä»“åº“çš„å¯¹åº”å…ƒæ•°æ®åˆå¹¶åŽ, è®¡ç®—å‡ºå¿«ç…§çš„æœ€æ–°ç‰ˆæœ¬, ç„¶åŽåŸºäºŽè¿™ä¸ªçœŸå®žå€¼æ£€æŸ¥æœ¬åœ°å’Œè¿œç¨‹ä»“åº“. å¦‚æžœæœ€åŽè§£æžå¾—åˆ°çš„æž„ä»¶æ˜¯æ—¶é—´æ ¼å¼çš„å¿«ç…§, ä¼šå°†å…¶å¤åˆ¶ä¸ºéžæ—¶é—´æˆ³çš„æ ¼å¼, å¹¶ä¼šä½¿ç”¨è¯¥æž„ä»¶. â–³: ä¾èµ–å’Œå£°æ˜Žä¸­ä¸æŽ¨èä½¿ç”¨ LATEST å’Œ RELEASE, ç”±äºŽ Maven æž„ä»¶çš„è§£æžæœºåˆ¶å¯èƒ½ä¼šä¸åŒæ—¶é—´çš„æž„ä»¶ä¼šè§£æžåˆ°ä¸åŒç‰ˆæœ¬çš„æž„ä»¶. é•œåƒå¦‚æžœä»“åº“ A å¯ä»¥æä¾› ä»“åº“ B çš„æ‰€æœ‰çš„å†…å®¹, åˆ™ A æ˜¯ B ä»“åº“çš„é•œåƒ. åˆ™ä»»ä½•ä»Ž B ä»“åº“èŽ·å–çš„æž„ä»¶, A ä¹Ÿå¯èŽ·å–. å¯ä»¥é€šè¿‡ä¿®æ”¹setting.xmlä½¿ç”¨é•œåƒ. 1234567891011121314151617181920212223&lt;settings&gt; ... &lt;mirrors&gt; &lt;mirror&gt; &lt;!-- è¯¥é•œåƒçš„å”¯ä¸€æ ‡è¯† --&gt; &lt;id&gt;&lt;/id&gt; &lt;name&gt;&lt;/name&gt; &lt;url&gt;&lt;/url&gt; &lt;!-- å€¼å¯¹åº”ä¸€èˆ¬ä»“åº“çš„Id,*(æ‰€æœ‰) --&gt; &lt;mirrorOf&gt;&lt;/mirrorOf&gt; &lt;!-- é€šé…ä¾‹å­ --&gt; &lt;!-- åŒ¹é…æ‰€æœ‰è¿œç¨‹ä»“åº“ --&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;!-- åŒ¹é…æ‰€æœ‰ä¸åœ¨æœ¬æœºä¸Šçš„è¿œç¨‹ä»“åº“, å¦‚localhost, file:// --&gt; &lt;mirrorOf&gt;external: *&lt;/mirrorOf&gt; &lt;!-- åŒ¹é…ä»“åº“ repo1, repo2. å¤šä¸ªä»“åº“ç”¨ , åˆ†å¼€ --&gt; &lt;mirrorOf&gt;repo1, repo2&lt;/mirrorOf&gt; &lt;!-- åŒ¹é…æ‰€æœ‰ä»“åº“, é™¤äº†ä»“åº“ repo1 --&gt; &lt;mirrorOf&gt;*, !repo1&lt;/mirrorOf&gt; &lt;/mirror&gt; &lt;/mirrors&gt; ...&lt;/settings&gt;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Java é¡¹ç›®éƒ¨ç½²ï¼ˆä¸€ï¼‰]]></title>
      <url>%2F2017%2F04%2F11%2FSystem-Deploy-1%2F</url>
      <content type="text"><![CDATA[ä¸Šå‘¨å…­æŠ˜è…¾äº†ä¸€å¤©ç»ˆäºŽæŠŠå¿«ä¸€å¹´å‰çš„å‘ç»™å¡«ä¸Šäº†ã€‚é˜¿é‡Œæ˜¯è¶Šæ¥è¶Šä¼šçŽ©äº†ï¼ŒECSçš„ä»·æ ¼ä»ŽåŽŸæ¥çš„40ä¸€ä¸ªæœˆæ…¢æ…¢çš„æ¶¨åˆ°äº†80ã€‚å‘çŽ°äº†è…¾è®¯æœåŠ¡å™¨ç‰¹æƒ ï¼Œå…è´¹ä¸€ä¸ªæœˆåŠ å‡ å¼ ä¼˜æƒ åŠµï¼Œå¤ŸåŠå¹´äº†ã€‚æŠŠè‡ªå·±å¼€å‘çš„ä¸€ä¸ªè½»åšå®¢éƒ¨ç½²ä¸ŠåŽ»äº†ï¼Œè¿™ä¸ªåšå®¢æ•´ä½“æ ·å¼ä»¿ç…§ Tumblrã€‚æ³¨å†Œçš„æ—¶å€™è¿žæŽ¥Outlooké‚®ç®±å‘æ³¨å†Œé‚®ä»¶è€æ˜¯æŠ½é£Žï¼Œæœ‰æ—¶å€™é‚®ä»¶å¯ä»¥å‘æˆåŠŸæœ‰æ—¶å€™è¿žæŽ¥å¤±è´¥ï¼Œä¸‹æ¬¡æœ‰æ—¶é—´æ³¨å†Œä¸ªé‚®ä»¶å¹³å°ã€‚ æ‰“ç®—ç³»ç»Ÿçš„è®°å½•ä¸‹é¡¹ç›®éƒ¨ç½²çš„è¿‡ç¨‹å’Œå…¶ä¸­çš„é‡åˆ°çš„çš„å‘ã€‚ ç³»ç»Ÿé‡‡ç”¨çš„æ˜¯ Apache Https + Tomcat + MySqlï¼Œé‡‡ç”¨çš„æ˜¯ä¼é¹…å®¶çš„äº‘æœåŠ¡å™¨ï¼Œç³»ç»Ÿæ˜¯ Centosï¼Œåªå¼€æ”¾äº† 80 ç«¯å£ä¾›ç½‘é¡µè®¿é—®ã€‚ æœ€åŽé™„ä¸Šç½‘ç«™çš„é“¾æŽ¥ã€‚ Honks]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Java Puzzlerï¼ˆ5-6ï¼‰]]></title>
      <url>%2F2017%2F03%2F26%2FJavaPuzzler-2%2F</url>
      <content type="text"><![CDATA[5. åå…­è¿›åˆ¶å’Œå…«è¿›åˆ¶12345678910111213System.out.println(0x80);//128//0x81çœ‹ä½œæ˜¯intåž‹ï¼Œæœ€é«˜ä½(ç¬¬32ä½)ä¸º0ï¼Œæ‰€ä»¥æ˜¯æ­£æ•°System.out.println(0x81);//129System.out.println(0x8001);//32769System.out.println(0x70000001);//1879048193//å­—é¢é‡0x80000001ä¸ºintåž‹ï¼Œæœ€é«˜ä½(ç¬¬32ä½)ä¸º1ï¼Œæ‰€ä»¥æ˜¯è´Ÿæ•°System.out.println(0x80000001);//-2147483647//å­—é¢é‡0x80000001Lå¼ºåˆ¶è½¬ä¸ºlongåž‹ï¼Œæœ€é«˜ä½ï¼ˆç¬¬64ä½ï¼‰ä¸º0ï¼Œæ‰€ä»¥æ˜¯æ­£æ•°System.out.println(0x80000001L);//2147483649//æœ€å°intåž‹System.out.println(0x80000000);//-2147483648//åªè¦è¶…è¿‡32ä½ï¼Œå°±éœ€è¦åœ¨å­—é¢å¸¸é‡åŽåŠ Lå¼ºè½¬longï¼Œå¦åˆ™ç¼–è¯‘æ—¶å‡ºé”™System.out.println(0x8000000000000000L);//-9223372036854775808 â–³ å¦‚æžœHexå’ŒOctalè½¬æ¢ä¸º10è¿›åˆ¶æ—¶å­—é¢å¸¸é‡çš„æœ€é«˜ä½ä¸º1ï¼Œè¿™ä¸ªæ•°ä¸ºè´Ÿæ•° åå…­è¿›åˆ¶çš„å­—é¢å¸¸é‡è¡¨ç¤ºçš„æ˜¯intåž‹ï¼Œå¦‚æžœè¶…è¿‡32ä½ï¼Œåˆ™éœ€è¦åœ¨åŽé¢åŠ â€œLâ€ï¼Œå¦åˆ™ç¼–è¯‘è¿‡ä¸è¿‡ã€‚å¦‚æžœä¸º32ï¼Œåˆ™ä¸ºè´Ÿintæ­£æ•°ï¼Œè¶…è¿‡32ä½ï¼Œåˆ™ä¸ºlongåž‹ï¼Œä½†éœ€æ˜Žç¡®æŒ‡å®šä¸ºlongã€‚ é€šå¸¸æœ€å¥½é¿å…æ··åˆç±»åž‹è¿ç®— 6. å¤šé‡è½¬åž‹ï¼ˆäºŒè¿›åˆ¶åŽŸç†ï¼‰ Type Bit Length Int 32ä½ 2^31-1 byte 8ä½ 2^7-1 char 16ä½ 2^16-1 æ•°æ®ç±»åž‹éƒ½è¦ä¿ç•™æœ€é«˜ä½ä½œä¸ºç¬¦å·ä½ æœ‰ç¬¦å·çš„æ•°æ®ç±»åž‹å­˜å‚¨æ˜¯å…ˆå°†å…¶æ— ç¬¦å·æ•°Binaryï¼Œåœ¨å°†å…¶åˆ°æœ€é«˜ä½éƒ½ç½®1å¦‚ï¼š 1234System.out.println(Integer.toBinaryString(-1));//1111 1111 1111 1111 1111 1111 1111 1111System.out.println(Integer.toBinaryString(-100));//1111 1111 1111 1111 1111 1111 1001 1100 ç¬¦å·æ‰©å±•è¿›è¡Œç¬¦å·æ‰©å±•ï¼Œå³çŸ­æ•°æ®ç±»åž‹çš„ç¬¦å·ä½å¡«å……åˆ°é•¿æ•°æ®ç±»åž‹çš„é«˜å­—èŠ‚ä½ï¼ˆå³æ¯”çŸ­æ•°æ®ç±»åž‹å¤šå‡ºçš„é‚£ä¸€éƒ¨åˆ†ï¼‰ï¼Œä¿è¯æ‰©å±•åŽçš„æ•°å€¼å¤§å°ä¸å˜ 123byte x=-1; int y=x; //åˆ™xçš„äºŒè¿›åˆ¶å€¼ä¸º1111 1111ï¼Œyçš„å€¼åº”ä¸º1111 1111 1111 1111 1111 1111 1000 1001ï¼›byte =1; short y=x; //åˆ™yçš„å€¼åº”ä¸º0000 0000 0000 0000 0000 0000 0000 0001ï¼› é›¶æ‰©å±•è¿›è¡Œé›¶æ‰©å±•ï¼Œå³ç”¨é›¶æ¥å¡«å……é•¿æ•°æ®ç±»åž‹çš„é«˜å­—èŠ‚ä½ 12unsigned char x=1000 1001b; short y=x; //åˆ™yçš„å€¼åº”ä¸º00000000 10001001bï¼›unsigned char x=0000 1001b; short y=x; //åˆ™yçš„å€¼åº”ä¸º00000000 00001001bï¼› â–³ ä»Žè¾ƒçª„æ•´åž‹è½¬æ¢æˆè¾ƒå®½æ•´åž‹è§„å®šï¼šå¦‚æžœæœ€åˆçš„æ•°å€¼ç±»åž‹æ˜¯æœ‰ç¬¦å·çš„ï¼Œå°±è¿›è¡Œç¬¦å·æ‰©å±•ï¼›å¦‚æžœå®ƒæ˜¯charï¼Œé‚£ä¹ˆä¸ç®¡å®ƒè½¬åŒ–æˆä»€ä¹ˆç±»åž‹ï¼Œéƒ½æ˜¯è¿›è¡Œé›¶æ‰©å±• 12345678char c = (char)(0xff &amp; b);/* 0000 0000 0000 0000 0000 0000 1111 1111 (0Xff) &amp; 1111 1111 1111 1111 1111 1111 1001 1100 (b=-100) ----------------------------------------- 0000 0000 0000 0000 0000 0000 1001 1100 (100)*///0xffæ˜¯ç¬¬å…«ä½å…¨éƒ¨ç½®1ï¼›å…¶ä»–ä½å…¨éƒ¨ç½®0ï¼›//ä¸Šé¢æ˜¯ä¸è¿›è¡Œç¬¦å·æ‰©å±•]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Maven å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰]]></title>
      <url>%2F2017%2F03%2F11%2FMaven-Note-2%2F</url>
      <content type="text"><![CDATA[Maven Dependencyï¼ŒMaven é™¤äº†å¿«é€Ÿæž„å»ºé¡¹ç›®å¤–ï¼Œè¿˜æœ‰ä¸€å¤§åŠŸèƒ½å°±æ˜¯ç®¡ç†é¡¹ç›®ä¾èµ–ã€‚Maven çš„ä¾èµ–ç®¡ç†é€šè¿‡groupIdã€artifactIdã€versionç­‰æ ‡è¯†ç¡®å®šä¸€ä¸ªä¾èµ–çš„åæ ‡ï¼Œä»Žè€Œé€šè¿‡ Maven ä»“åº“æˆ–èŽ·å–å¯¹åº”çš„é¡¹ç›®ä¾èµ–çš„ Jarï¼Œè‡ªåŠ¨åŒ–çš„è§£æžä»»ä½•ä¸€ä¸ª Java æž„ä»¶ã€‚ Maven åæ ‡ groupId: å®šä¹‰å½“å‰Mavené¡¹ç›®éš¶å±žçš„å®žé™…é¡¹ç›®. artifactId: å®šä¹‰å®žé™…é¡¹ç›®ä¸­çš„ä¸€ä¸ªMavené¡¹ç›®(æ¨¡å—). version: å®šä¹‰mavené¡¹ç›®å½“å‰æ‰€å¤„çš„ç‰ˆæœ¬. packaging: å®šä¹‰Mavené¡¹ç›®çš„æ‰“åŒ…æ–¹å¼. classifier: å®šä¹‰æž„å»ºè¾“å‡ºçš„ä¸€äº›é™„å±žæž„ä»¶. ä¾‹å¦‚:ä¸€ä¸ªé¡¹ç›®çš„ä¸»æž„ä»¶æ˜¯xxx-xxx-7.0.0.jar, å¯èƒ½è¿˜éœ€è¦javadocå’Œsource, è¿™æ—¶javadocå’Œsourceå°±æ˜¯é™„å±žæž„ä»¶çš„classifier, classifierä¸èƒ½å®šä¹‰, å®ƒä¸æ˜¯é»˜è®¤ç”Ÿæˆçš„, è€Œæ˜¯ç”±é™„åŠ æ’ä»¶å¸®åŠ©ç”Ÿæˆçš„. groupId, artifactId, versionæ˜¯å¿…é¡»çš„, packaging æ˜¯å¯é€‰çš„(é»˜è®¤jar), è€Œclassifieræ˜¯ä¸èƒ½è‡ªå®šä¹‰çš„. mavené¡¹ç›®ç”Ÿæˆçš„æ–‡ä»¶åä¸€èˆ¬ä¸º artifactId-version[-classifier].packaging ä¾èµ– POM å®šä¹‰123456789101112131415161718192021222324&lt;project&gt;... &lt;!-- é¡¹ç›®æ‰€æœ‰çš„ä¾èµ–--&gt; &lt;dependencies&gt; &lt;!-- å®šä¹‰ä¸€ä¸ªæ¨¡å—ä½¿ç”¨çš„ä¸€ä¸ªä¾èµ–--&gt; &lt;dependency&gt; &lt;!-- ä¾èµ–çš„åŸºæœ¬åæ ‡--&gt; &lt;groupId&gt;&lt;/groupId&gt; &lt;artifactId&gt;&lt;artifactId&gt; &lt;version&gt;&lt;/version&gt; &lt;!-- ä¾èµ–ç±»åž‹,å¯¹åº”é¡¹ç›®ç›®æ ‡å®šä¹‰ä¸­çš„packaging, ä¸å£°æ˜Žé»˜è®¤ä¸ºJar --&gt; &lt;type&gt;&lt;/type&gt; &lt;!-- ä¾èµ–ä½œç”¨èŒƒå›´--&gt; &lt;scope&gt;&lt;/scope&gt; &lt;!-- æ ‡è®°ä¾èµ–æ˜¯å¦å¯é€‰--&gt; &lt;optional&gt;&lt;/optional&gt; &lt;!-- éœ€è¦æŽ’é™¤çš„ä¾èµ– --&gt; &lt;exclusions&gt; &lt;exclusion&gt;&lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;/dependencies&gt;...&lt;/project&gt; ä¾èµ–èŒƒå›´ScopeMavenä¼šä½¿ç”¨3ç§classpathæ¥æŽ§åˆ¶ä½¿ç”¨çš„ä¾èµ–(ç¼–è¯‘classpath, æµ‹è¯•classpath, è¿è¡Œæµ‹è¯•classpath).Mavenæœ‰ä»¥ä¸‹å‡ ç§ä¾èµ–èŒƒå›´. compile ç¼–è¯‘ä¾èµ–èŒƒå›´. é»˜è®¤ä¾èµ–èŒƒå›´, å¯¹åº”ç¼–è¯‘, æµ‹è¯•, è¿è¡Œä¸‰ç§classpathéƒ½æœ‰æ•ˆ. eg: Spring-core test æµ‹è¯•ä¾èµ–èŒƒå›´. åªå¯¹æµ‹è¯•classpathæœ‰æ•ˆ, åœ¨ç¼–è¯‘ä¸»ä»£ç æˆ–è€…è¿è¡Œé¡¹ç›®ä¸­æ— æ³•ä½¿ç”¨è¯¥ä¾èµ–. eg: JUint provided å·²æä¾›çš„ä¾èµ–èŒƒå›´. å¯¹äºŽç¼–è¯‘å’Œæµ‹è¯•æ—¶æœ‰æ•ˆ, è¿è¡Œæ—¶æ— æ•ˆä½¿ç”¨. eg: servlet-api runtime è¿è¡Œæ—¶ä¾èµ–èŒƒå›´. å¯¹åº”æµ‹è¯•å’Œè¿è¡Œæ—¶æœ‰æ•ˆ, ä½†é¡¹ç›®ç¼–è¯‘æ—¶æ— æ•ˆ. eg: JDBC ,ç¼–è¯‘æ—¶ä½¿ç”¨JDKæä¾›çš„JDBCæŽ¥å£. system ç³»ç»Ÿä¾èµ–èŒƒå›´. ä¾èµ–èŒƒå›´å’Œprovidedå®Œå…¨ä¸€è‡´, ä½†æ˜¯éœ€è¦æ˜¾ç¤ºçš„æŒ‡å®šä¾èµ–æ–‡ä»¶è·¯å¾„. æ­¤ç±»ä¸æ˜¯ç”±Mavenä»“åº“è§£æžå¤„ç†,å¾€å¾€ä¸Žæœ¬æœºç³»ç»Ÿç»‘å®š 1234567&lt;dependency&gt; &lt;groupId&gt;&lt;/groupId&gt; &lt;artifactId&gt;&lt;artifactId&gt; &lt;version&gt;&lt;/version&gt; &lt;scope&gt;system&lt;/scope&gt; &lt;systemPath&gt;$&#123;java.home&#125;/lib/rt.jar&lt;/systemPath&gt;&lt;/dependency&gt; import å¯¼å…¥ä¾èµ–èŒƒå›´. è¯¥ä¾èµ–ä¸ä¼šå¯¹classpathäº§ç”Ÿå®žé™…å½±å“. Scope compile classpath test classpath runtime classpath compile Y Y Y test - Y - provided - Y Y runtime - Y Y system Y Y - ä¾èµ–ä¼ é€’ä¾èµ–èŒƒå›´ä¸ä½†å¯ä»¥æŽ§åˆ¶3ç§classpathçš„ä¾èµ–,å¯¹ä¼ é€’æ€§ä¾èµ–ä¹Ÿä¼šäº§ç”Ÿå½±å“. compile test provided runtime compile compile - - runtime test test - - test provided provided - provided provided runtime runtime - - runtime eg: Honks Test (Scope:Test, å¯¹åº”è¡¨ä¸­è¡Œ,ç¬¬ä¸€ä¾èµ–) ä¾èµ–Spring-email(Scope:compile, å¯¹åº”è¡¨ä¸­åˆ—,ç¬¬äºŒä¾èµ–), Spring-emailä¾èµ–java-mail. åˆ™Honks Testé€šè¿‡ä¼ é€’ä¾èµ–java-mail ä¾èµ–è°ƒè§£ ä¾èµ–è·¯å¾„æœ€è¿‘è€…ä¼˜å…ˆ ä¾èµ–è·¯å¾„ç›¸åŒ, å…ˆå£°æ˜Žçš„ä¼˜å…ˆ eg: A -&gt; B -&gt; C -&gt; X(1.0), A -&gt; B -&gt; X(2.0), ä¼˜å…ˆä½¿ç”¨ X(2.0) [è·¯å¾„æ›´çŸ­] A -&gt; B -&gt; X(1.0), A -&gt; B -&gt; X(2.0), ä¼˜å…ˆä½¿ç”¨ X(1.0) [å…ˆå£°æ˜Ž] ä¾èµ–å®šä¹‰ä¼˜åŒ– å®šä¹‰ä¼˜åŒ– 12345678910111213141516171819202122232425262728293031&lt;project&gt; &lt;modleVersion&gt;4.0.0&lt;/modleVersion&gt; &lt;groupId&gt;com.dlc.maven&lt;/groupId&gt; &lt;artifactId&gt;maven&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;!-- ä¾èµ–å½’ç±» --&gt; &lt;properties&gt; &lt;springframework.version&gt;3.6&lt;/springframework.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;!-- ä½¿ç”¨ä¾èµ–å½’ç±» --&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;maven-dep&lt;/artifactId&gt; &lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt; &lt;groupId&gt;com.dlc.maven&lt;/groupId&gt; &lt;artifactId&gt;maven-dep&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;!-- ä¾èµ–æŽ’é™¤ --&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;com.dlc.maven&lt;/groupId&gt; &lt;artifactId&gt;maven-dep-dep&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt; ä¾èµ–ä¼˜åŒ– 12345678# æŸ¥çœ‹å½“å‰é¡¹ç›®çš„å·²è§£æžä¾èµ–mvn dependency:list# æŸ¥çœ‹å½“å‰é¡¹ç›®çš„ä¾èµ–æ ‘mvn dependency:tree# åˆ†æžå½“å‰é¡¹ç›®ä¾èµ–mvn dependency:analyze# è¾“å‡º Used undeclared dependencies, é¡¹ç›®ä¸­ä½¿ç”¨çš„ä½†æ²¡æœ‰æ˜¾å¼å£°æ˜Žçš„ä¾èµ–(ä½†å½“å‰é¡¹ç›®ä¾èµ–çš„ä¼ é€’æ€§ä¾èµ–ä¸­å­˜åœ¨)# è¾“å‡º Unused declared dependencies, é¡¹ç›®æœªä½¿ç”¨çš„, å½“æ˜¾å¼å£°æ˜Žçš„ä¾èµ–]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Java Annotation]]></title>
      <url>%2F2017%2F02%2F27%2FJava_Annotation%2F</url>
      <content type="text"><![CDATA[Java Annotationæ˜¯JDK5.0å¼•å…¥çš„ä¸€ç§æ³¨é‡Šæœºåˆ¶ã€‚éšç€ Spring å¼•å…¥äº†å¤§é‡çš„æ³¨é‡Šç±»ï¼Œç›¸æ¯” XML é…ç½®ï¼Œæ³¨é‡Šé…ç½®æ›´å—æ¬¢è¿Žï¼Œæœ‰è¿›ä¸€æ­¥æµè¡Œçš„è¶‹åŠ¿ã€‚å¯ä»¥é€šè¿‡ è‡ªå®šä¹‰ä¸€äº›æ³¨é‡Šæ¥å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘ä»£ç ã€‚æ·±å…¥å­¦ä¹ æ³¨è§£ï¼Œå°±å¿…é¡»èƒ½å®šä¹‰è‡ªå·±çš„æ³¨è§£ï¼Œå¹¶ä½¿ç”¨æ³¨è§£ï¼Œåœ¨å®šä¹‰è‡ªå·±çš„æ³¨è§£ä¹‹å‰ï¼Œå°±å¿…é¡»è¦äº†è§£Javaæä¾›çš„å…ƒæ³¨è§£å’Œç›¸å…³å®šä¹‰æ³¨è§£çš„è¯­æ³•ã€‚ å®šä¹‰ Annotaiionéœ€è¦å£°æ˜Žä¸º@interface @Targetè§„å®šæ³¨é‡Šä¸€å®šè¦å†™åœ¨ä»€ä¹ˆè¯­å¥ä¸Šé¢@Target(ElementType.å¯¹åº”ç±»åž‹) 12345678910111213TYPE: ç±»,æŽ¥å£æˆ–è€…Enumå£°æ˜ŽFIELD: åŸŸ(å±žæ€§)å£°æ˜ŽMETHOD: æ–¹æ³•å£°æ˜ŽPARAMETER: å‚æ•°ç”³æ˜ŽCONSTRUCTOR: æž„é€ æ–¹æ³•å£°æ˜ŽLOCAL_VARIABLE: å±€éƒ¨å˜é‡å£°æ˜ŽANNOTATION_TYPE: æ³¨é‡Šç±»å£°æ˜ŽPACKAGE: åŒ…å£°æ˜ŽJava 8 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œåªèƒ½å…è®¸åœ¨å£°æ˜Žå¼å‰ä½¿ç”¨ Annotation(Annotaionå¯ä»¥åœ¨ä»»ä½•ä½¿ç”¨Typeçš„åœ°æ–¹)TYPE_PARAMETER: Type çš„å£°æ˜Žå¼å‰TYPE_USE: æ‰€æœ‰ä½¿ç”¨ Type çš„åœ°æ–¹(å¦‚ï¼šæ³›åž‹ï¼Œç±»åž‹è½¬æ¢ç­‰) @Retention éœ€è¦åœ¨ä»€ä¹ˆçº§åˆ«ä¿å­˜è¯¥æ³¨é‡Šä¿¡æ¯@Retention(RetentionPolicy.å¯¹åº”ç±»åž‹) SOURCE: æ³¨é‡Šå°†è¢«ç¼–è¯‘å™¨ä¸¢å¼ƒ,ä¾‹å¦‚@Override,è¿™ç§åªèµ·åˆ°æ ‡ç¤ºçš„æ³¨é‡Š CLASS: æ³¨é‡Šåœ¨classä¸­,ä½†æ˜¯ä¼šè¢«VMä¸¢å¼ƒ RUNTIME: æ³¨é‡Šåœ¨classä¸­,VMä¸­ä¹Ÿä¼šå­˜åœ¨ @Documented å°†æ­¤æ³¨è§£åŒ…å«åœ¨Javadocä¸­ ä½¿ç”¨æ³¨é‡Š12345678910@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface ValueBind &#123; enum fieldType&#123; STRING,INT &#125; fieldType type(); String value();&#125; ä½¿ç”¨çš„Beanå¯¹è±¡123456789101112131415161718192021222324252627282930313233public class Student implements Serializable &#123; private String studentId; private int age; private String name; public String getStudentId() &#123; return studentId; &#125; @ValueBind(type = ValueBind.fieldType.STRING,value = "7777") public void setStudentId(String studentId) &#123; this.studentId = studentId; &#125; public int getAge() &#123; return age; &#125; @ValueBind(type = ValueBind.fieldType.INT,value = "21") public void setAge(int age) &#123; this.age = age; &#125; public String getName() &#123; return name; &#125; @ValueBind(type = ValueBind.fieldType.STRING,value = "wuyu") public void setName(String name) &#123; this.name = name; &#125;&#125; æµ‹è¯•12345678910111213141516171819202122232425262728 public static void main(String[] args) throws Exception &#123; Object c = Class.forName("Student").newInstance(); /** * getMethod*() èŽ·å–çš„æ˜¯ç±»çš„public method * including those declared by the class(è‡ªå·±) or interface(æŽ¥å£) and those inherited from superclasses and superinterfaces(çˆ¶ç±»,çˆ¶æŽ¥å£) * getDeclaredMethod*() åªå¾—åˆ°è‡ªèº«ç”³æ˜Žçš„æ‰€æœ‰æ–¹æ³•, * åŒ…æ‹¬public, protected, default (package) access, and private methods, but excluding inherited methods * * å¯¹åº”æ²¡æœ‰methodè¿”å›žä¸€ä¸ªlength=0 Array */ Method[] methodArray = c.getClass().getDeclaredMethods(); for (Method method: methodArray) &#123; if(method.isAnnotationPresent(ValueBind.class))&#123; ValueBind annotation = method.getAnnotation(ValueBind.class); String type = String.valueOf(annotation.type()); String value = annotation.value(); if("INT".equals(type))&#123; method.invoke(c,new Integer(value)); &#125;else&#123; method.invoke(c,value); &#125; &#125; &#125; AnnotationDemo1 annotationStudent = (AnnotationDemo1) c; System.out.println("StudentId===="+annotationStudent.getStudentId()); System.out.println("StudentName===="+annotationStudent.getName()); System.out.println("StudentAge===="+annotationStudent.getAge());&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Java Puzzlerï¼ˆ1-4ï¼‰]]></title>
      <url>%2F2017%2F02%2F11%2FJavaPuzzler-1%2F</url>
      <content type="text"><![CDATA[1. å¥‡æ•°æ€§123public static boolen isOdd(int i)&#123; return i %2 ==1;&#125; ä¸Šé¢çš„methodæ˜¯é”™è¯¯çš„ï¼Œä¼šåœ¨1/4çš„æ—¶é—´é‡Œè¿”å›žçš„æ˜¯é”™è¯¯å€¼ a % b = cä¸­cçš„å€¼å–å†³äºŽaï¼›åªè¦aä¸ºæ­£ï¼Œæ— è®ºbå–ä½•å€¼ï¼Œè‹¥æœ‰ä½™æ•°ï¼Œcä¸€å®šä¸ºæ­£ï¼ŒåŒç†å¯çŸ¥aä¸ºè´Ÿï¼Œcä¸€å®šä¸ºè´Ÿå€¼ã€‚correct methodï¼š123456public static boolen idOdd(int i)&#123; rutrun i%2 != 0;&#125;punlic static boolen idOdd(int i)&#123; retrun (i&amp;1)!=0;&#125; 2. æ‰¾é›¶æ—¶åˆ»12345public class change&#123; punlic static void main (String[] args)&#123; System.out.println(2.00-1.10); &#125;&#125; ä»¥ä¸Šä¸ä¼šè¾“å‡º 0.9ï¼Œè€Œæ˜¯0.899999999999ä½¿ç”¨printfï¼ˆ&quot;%.2f%n&quot;2.00-1.00);ä½†æ˜¯ä½¿ç”¨çš„doubleã€‚â–³ Doubleæ˜¯åœ¨ä¸€ä¸ªå¾ˆå¹¿çš„å€¼åŸŸä¸Šæä¾›ä¸€ä¸ªå¾ˆå¥½çš„ç›¸è¯†å€¼ï¼Œå¹¶ä¸æ˜¯ç²¾ç¡®å€¼ã€‚åœ¨éœ€è¦ç²¾ç¡®ç­”æ¡ˆæ˜¯ï¼Œå»ºè®®æ˜¯è¦é¿å…æ˜¯ç”¨floatå’Œdoubleï¼Œå¯¹äºŽè´§å¸è®¡ç®—ï¼Œå»ºè®®ä½¿ç”¨intå’Œlongï¼ŒBigdecimalä¸€å®šè¦ä½¿ç”¨Bigdecimalï¼ˆStringï¼‰æž„é€ å™¨ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨BIgdecimalï¼ˆdoubleï¼‰ï¼Œè¿”å›žä»ä¼šæ˜¯ä¸ç²¾ç¡®çš„å€¼ã€‚ 3. é•¿æ•´é™¤1234567public class LongDivsion&#123; public static void main(String[] args)&#123; final long a=24*60*60*1000*1000; final long b=24*60*60*1000; System.out.println(a/b); &#125;&#125; ä»¥ä¸Šè¿”å›žä¸ä¼šè¾“å‡º1000ï¼Œè€Œæ˜¯5ã€‚å› ä¸º24*60*60*1000*1000ä¼šæº¢å‡ºï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªLongåž‹ï¼Œè€Œæ˜¯å…ˆç®—å‡ºç»“æžœåŽåœ¨è½¬æ¢æˆLongåž‹çš„aã€‚ 1234567public class LongDivsion&#123; public static void main(String[] args)&#123; final long a=24L*60*60*1000*1000; final long b=24L*60*60*1000; System.out.println(a/b); &#125;&#125; â–³å½“æ“ä½œå¾ˆå¤§çš„æ•°æ—¶ä¸€å®šè¦æé˜²æº¢å‡º]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Maven å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰]]></title>
      <url>%2F2017%2F01%2F31%2FMaven-Note-1%2F</url>
      <content type="text"><![CDATA[åšçš„é¡¹ç›®å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨ Maven æž„å»ºçš„ï¼Œä¸€ç›´æ²¡æœ‰ç³»ç»Ÿçš„å­¦ä¹ å’Œæ•´ç† Maven çš„çŸ¥è¯†ã€‚æœ€è¿‘æŽ¥æ‰‹çš„ä¸€ä¸ªé¡¹ç›®ï¼Œç ”ç©¶æž¶æž„ä»£ç çš„æ—¶å€™ï¼Œå‘çŽ°ä¸€ä¸ªå¤§ç‰›ä»¬å†™çš„ä¸€ä¸ªé€šè¿‡è§£æž PDM ç”Ÿæˆå¯¹åº”æ•°æ®çš„ç”Ÿæˆå®žä½“å¯¹è±¡çš„ä¸€ä¸ª Maven æ’ä»¶ã€‚ç ”ç©¶çš„æ—¶å€™å‘çŽ°å¾ˆå¤š Maven çŸ¥è¯†è¿˜ä¸ç”šäº†è§£ï¼Œæ‰¾äº†æœ¬ ã€ŠMaven å®žæˆ˜ã€‹ç³»ç»Ÿçš„å­¦ä¹ å’Œæ•´ç†çŸ¥è¯†ç‚¹ä¸€éã€‚ Maven IntroduceMaven æ˜¯ä¸€ç§æž„å»ºå·¥å…·,åŒæ—¶è¿˜æ˜¯ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…·å’Œé¡¹ç›®ä¿¡æ¯ç®¡ç†å·¥å…·.å®ƒæä¾›äº†ä¸­å¤®ä»“åº“,èƒ½å¸®æˆ‘ä»¬è‡ªåŠ¨ä¸‹è½½æž„ä»¶. Maven æ–‡ä»¶ç›®å½• bin è¯¥ç›®å½•åŒ…å«mvnè¿è¡Œçš„è„šæœ¬,è¿™äº›è„šæœ¬ç”¨æ¥é…ç½®Javaå‘½ä»¤,mvnDebug,ä¸»è¦æ˜¯ Maven è¿è¡Œæ—¶å¼€å¯debug,è°ƒè¯• Maven æœ¬èº«. m2.confæ–‡ä»¶, classworldsçš„é…ç½®æ–‡ä»¶. boot åªæœ‰ä¸€ä¸ªæ–‡ä»¶,plexus-classworlds-(version).jar. ä¸€ä¸ªç±»åŠ è½½å™¨. Mavenä½¿ç”¨å®ƒåŠ è½½å¯¹åº”è‡ªå·±çš„ç±»åº“ conf settings.xml, å…¨å±€å®šä¹‰Mavenè¡Œä¸º. lib Mavenè¿è¡Œæ‰€éœ€çš„Javaç±»åº“. å­˜æ”¾çš„çœŸæ­£çš„Maven, é‡Œé¢å†…ç½®äº†å¾ˆå¤šMavençš„è¶…çº§POM. è®¾ç½®HTTPä»£ç†12345678910111213141516171819&lt;settings&gt;&lt;proxies&gt; &lt;proxy&gt; &lt;id&gt;my-proxy&lt;/id&gt; &lt;!-- æ˜¯å¦æ¿€æ´»è¯¥ä»£ç† --&gt; &lt;active&gt; false | true &lt;/active&gt; &lt;!-- ä»£ç†åè®® --&gt; &lt;protocol&gt;http&lt;/protocol&gt; &lt;host&gt;&lt;/host&gt; &lt;port&gt;&lt;/port&gt; &lt;!-- &lt;username&gt;***&lt;/username&gt; &lt;password&gt;***&lt;/password&gt; è®¾ç½®ä¸éœ€è¦ä»£ç†çš„ä¸»æœºå, * è¡¨ç¤ºæ‰€æœ‰ä»¥google.comçš„åŸŸåä¸ä½¿ç”¨ä»£ç† &lt;nonProxyHosts&gt;*.google.com&lt;/nonProxxyHosts&gt; --&gt; &lt;/proxy&gt;&lt;proxies&gt;&lt;/settings&gt; Maven ABC ç¼–å†™POM 12345678910111213&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;!-- æŒ‡å®šå½“å‰POMç‰ˆæœ¬,Maven2 ä»¥åŠMaven3 é»˜è®¤ä¸º 4.0.0 --&gt; &lt;modelVersion&gt;4.0.0&lt;/modleVersion&gt; &lt;!-- groupId+artifaceIdå®šä¹‰ä¸€ä¸ªé¡¹ç›®çš„åŸºæœ¬åæ ‡--&gt; &lt;groupId&gt;&lt;/groupId&gt; &lt;!-- å½“å‰æ‰€å±žgroupä¸­çš„Mavençš„å”¯ä¸€ID--&gt; &lt;artifactId&gt;&lt;artifactId&gt; &lt;!-- artifasté¡¹ç›®çš„ç‰ˆæœ¬å· --&gt; &lt;version&gt;&lt;/version&gt; &lt;!-- --&gt; &lt;name&gt;&lt;/name&gt;&lt;/project&gt; ç¼–å†™ä¸»ä»£ç ä¸»ä»£ç ä½äºŽ src/main/java, Javaç±»çš„åŒ…åéœ€è¦è·ŸPOMä¸­å®šä¹‰çš„groupIdå’ŒartifactIdç›¸å»åˆ,ç¼–è¯‘è¾“å‡ºä¸ºtarget ç¼–å†™æµ‹è¯•ä»£ç æµ‹è¯•ä»£ç ä½äºŽ src/test/java Archetypeç”Ÿæˆé¡¹ç›®éª¨æž¶1mvn archetype:generate]]></content>
    </entry>

    
  
  
</search>
